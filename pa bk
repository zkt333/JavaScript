
 <%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>
 <%@ taglib uri="http://liferay.com/tld/aui" prefix="aui"%>
 <%@ taglib uri="http://liferay.com/tld/portlet" prefix="liferay-portlet"%>
 <%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme"%>
 <%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui"%>
 <%@ taglib uri="http://liferay.com/tld/util" prefix="liferay-util"%>
 <portlet:defineObjects />
 <%@page import="java.io.Serializable"%>
 <%@page import="javax.portlet.PortletSession"%>
 <%@page import="com.liferay.portal.model.User"%>
 <%@page import="com.liferay.portal.model.Organization"%>
 <%@page import="com.liferay.portal.theme.ThemeDisplay"%>
 <%@ page language="java" contentType="text/html; charset=UTF-8"
     pageEncoding="UTF-8"%>
 <%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>
 <%@ taglib uri="http://liferay.com/tld/aui" prefix="aui"%>
 <%@ page import="java.util.*"%>
 <%@ page import="javax.portlet.PortletPreferences"%>
 <%@ page import="java.text.DateFormat"%>
 <%@ page import="java.text.SimpleDateFormat"%>
 <%@ page
     import="com.liferay.portlet.expando.service.ExpandoValueServiceUtil"%>
 <%@ page
     import="com.liferay.portal.service.OrganizationLocalServiceUtil"%>
 <%@ page import="com.liferay.portal.kernel.util.WebKeys"%>
 <%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui"%>
 <%@ page import="com.liferay.portal.kernel.language.LanguageUtil"%>
 <%@ page import="com.liferay.portal.kernel.util.ParamUtil"%>
 <%@ page import="com.liferay.portal.util.PortalUtil"%>
 <%@ page import="com.liferay.portal.kernel.language.LanguageWrapper"%>
 <%@ page import="com.liferay.portal.kernel.language.UnicodeLanguageUtil"%>
 <%@page import="com.liferay.portal.util.PortalUtil"%>
 <%@page import="javax.portlet.PortletURL"%>
 <%@page import="com.liferay.portal.kernel.portlet.LiferayWindowState"%>
 <portlet:defineObjects />
 <%
 String namespace="portlet_paymentaccount_WAR_PayAccountMangementportlet";
 ThemeDisplay themeDisplay = (ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
 User user = themeDisplay.getUser();
 long userId=user.getUserId();

 String language = "en";
 HttpServletRequest r = PortalUtil.getHttpServletRequest(renderRequest);
 /* String langId=LanguageUtil.getLanguageId(request);
 String val =  PortalUtil.getOriginalServletRequest(r).getParameter("language");
 if(val !=null){
 	language =val;
 }else{
 boolean is_en_US=langId.equals("en_US");
 boolean is_zh_CN=langId.equals("zh_CN");

 if(is_zh_CN)
 	language="zh";
 } */
 String langId=LanguageUtil.getLanguageId(request);
 boolean is_en_US=langId.equals("en_US");
 boolean is_zh_CN=langId.equals("zh_CN");
 boolean is_zh_TW=langId.equals("zh_TW");
 boolean is_ja_JP=langId.equals("ja_JP");

 %>
<%@include file="AddNewPayment.jspf"%>
<%@include file="AddNewRecipient.jspf"%>
 <div class="<%=namespace%>">

 <div class="<%=namespace%>body">
 <div class="accounttype">
   <ul  id="<%=namespace%>select2" style='width:100%;margin: 0 0 0px 0px;float:left'>
    <li value="sender" id='<%=namespace%>sender' class="tab-link current" data-tab="tab-1" style='background:#2eb452;color:white'><liferay-ui:message key="sender"/></li>
    <li value="receiver" id='<%=namespace%>receiver' class="tab-link" data-tab="tab-2"><liferay-ui:message key="receiver"/></li>
   </ul>

 </div>
 <div class="flex-container">
<%--  <ul  id="<%=namespace%>select1" style='width:100%;margin: 0 0 0px 0px;'>
    <li value="BA" id='<%=namespace%>ba' class="tab-link current" data-tab="tab-1" style='background:#2eb452;color:white'><liferay-ui:message key="BankAccount"/></li>
    <li value="DC" id='<%=namespace%>dc' class="tab-link" data-tab="tab-2"><liferay-ui:message key="DebitCard"/></li>
    <li value="TP" id='<%=namespace%>tp' class="tab-link" data-tab="tab-3"><liferay-ui:message key="ThirdParty"/></li>
 </ul>  --%>
<%--  <select id="<%=namespace%>paymentselect">
    <option value="BankAccount" id='<%=namespace%>ba'><liferay-ui:message key="BankAccount"/></option>
    <option value="DebitCard" id='<%=namespace%>dc'><liferay-ui:message key="DebitCard"/></option>
    <option value="ThirdParty" id='<%=namespace%>tp'><liferay-ui:message key="ThirdParty"/></option>
 </select> --%>

 <%--   <div style='display:inline-block;float:right'>
  <button name="addAccout" class="addAccButton" id="addAcc"><liferay-ui:message key="pay.addAccount"/></button>
  </div> --%>
 </div>
   <div id="<%=namespace%>currencypartall">
   <div  id="<%=namespace%>currencypart">
   <%-- <p id="<%=namespace%>p"><liferay-ui:message key="currencyselect"/></p> --%>
 <select  class='<%=namespace%>currencyselect' id="<%=namespace%>currencyselect1">
   <option value="allcurrency"><liferay-ui:message key="Allcurrency"/></option>
  </select>
   <select id="<%=namespace%>paymentselect">
    <option value="alltype" id='<%=namespace%>ba'><liferay-ui:message key="Allaccount"/></option>
    <option value="BankAccount" id='<%=namespace%>ba'><liferay-ui:message key="BankAccount"/></option>
    <option value="DebitCard" id='<%=namespace%>dc'><liferay-ui:message key="DebitCard"/></option>
    <option value="ThirdParty" id='<%=namespace%>tp'><liferay-ui:message key="ThirdParty"/></option>
 </select>
 <button name="addAccout" class="addAccButton" id="addAcc" ><liferay-ui:message key="pay.addAccount"/></button>
 <button name="addAccout" class="addAccButton" id="addAccreceiver" ><liferay-ui:message key="pay.addAccount"/></button>
  </div>
 <%--  <div style='display:inline-block;float:right'>
  <button name="addAccout" class="addAccButton" id="addAcc"><liferay-ui:message key="pay.addAccount"/></button>
  </div> --%>
  </div>
   <div id="<%=namespace%>BA" class="detail">
   
  		<div class="noneres" style="display:block;background-color:#ededed">
 	                          <div class="no-icon">
 	                          </div>
 	                          <div class="no-res">
 	                               <p><liferay-ui:message key="myProfile.noresult"/></p>
 	                          </div>
 	     </div> 
   		
         <table id="<%=namespace%>BATable" class="display responsive nowrap" cellspacing="0" width="100%" style="display:none;background-color:#ededed">
 		  <thead>
 		  <tr>
 	   	<th><liferay-ui:message key="accountName"/></th>
 	   	<th><liferay-ui:message key="accountId"/></th>
 	   	<th><liferay-ui:message key="currencyCd"/></th>
 	   	<th><liferay-ui:message key="balance"/></th>
 	   	<th><liferay-ui:message key="identity"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>
 	   	<th><liferay-ui:message key="fullname"/></th>
 	   	<th><liferay-ui:message key="addressLine1"/></th>
 	   	<th><liferay-ui:message key="zipCode"/></th>
 	   	<th><liferay-ui:message key="state"/></th>
 	   	<th><liferay-ui:message key="city"/></th>
 	   	<th><liferay-ui:message key="phone"/></th>
 	   	<th><liferay-ui:message key="addressLine2"/></th>
 	   	<th><liferay-ui:message key="addressLine3"/></th>
 	   	<th><liferay-ui:message key="holderCountryCd"/></th>
 	   	<th><liferay-ui:message key="identityNum"/></th>
 	   	<th><liferay-ui:message key="email"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>
 	   	<th><liferay-ui:message key="detail"/></th>
 	
 	    <%-- <th><liferay-ui:message key="paymentType"/></th> --%>
 	   	<th></th>
 	   	</tr>
 		   </thead>
    		</table>
    		
    		<div id="<%=namespace%>BATabledialog" title="Basic dialog" style="display:none">
        <div id="<%=namespace%>BATabledetail"></div>  
    		<!-- <div class="paging-1"></div> -->
    </div>
        <div id="<%=namespace%>baconfirm" style="display:none"><p><liferay-ui:message key="Areyousuretodeletethisaccount"/></p></div>
        <div id="<%=namespace%>editinfo" style="display:none">
        <div id="<%=namespace%>editinfodetail"></div>  
        </div>
 </div>
   <div id="<%=namespace%>DC" class="detail">
  		<div class="noneres">
 	                          <div class="no-icon">
 	                          </div>
 	                          <div class="no-res">
 	                               <p><liferay-ui:message key="myProfile.noresult"/></p>
 	                          </div>
 	     </div> 
   		
         <table id="<%=namespace%>DCTable" class="display responsive nowrap" cellspacing="0" width="100%" style="background-color:#ededed;">
 		  <thead>
 		  <tr>
 	   	<th><liferay-ui:message key="accountName"/></th>
 	   	<th><liferay-ui:message key="accountId"/></th>
 	   	<th><liferay-ui:message key="currencyCd"/></th>
 	   	<th><liferay-ui:message key="balance"/></th>
 	   	<th><liferay-ui:message key="identity"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>
 	   	<th><liferay-ui:message key="fullname"/></th>
 	   	<th><liferay-ui:message key="addressLine1"/></th>
 	   	<th><liferay-ui:message key="zipCode"/></th>
 	   	<th><liferay-ui:message key="state"/></th>
 	   	<th><liferay-ui:message key="city"/></th>
 	   	<th><liferay-ui:message key="phone"/></th>
 	   	<th><liferay-ui:message key="addressLine2"/></th>
 	   	<th><liferay-ui:message key="addressLine3"/></th>
 	   	<th><liferay-ui:message key="holderCountryCd"/></th>
 	   	<th><liferay-ui:message key="identityNum"/></th>
 	   	<th><liferay-ui:message key="email"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>
 	   	<th><liferay-ui:message key="detail"/></th>
 
 	    <%-- <th><liferay-ui:message key="paymentType"/></th> --%>
 	   	<th></th>
 	   	</tr>
 		   </thead>
    		</table>
    		
    		<div id="<%=namespace%>DCTabledialog" title="Basic dialog" style="display:none;padding:15px">
        <div id="<%=namespace%>DCTabledetail"></div>  
    		<!-- <div class="paging-1"></div> -->
    </div>
        <div id="<%=namespace%>dcconfirm" style="display:none"><p><liferay-ui:message key="Areyousuretodeletethisaccount"/></p></div>
 </div>
   <div id="<%=namespace%>TP" class="detail">
   		<div class="noneres">
 	                          <div class="no-icon">
 	                          </div>
 	                          <div class="no-res">
 	                               <p><liferay-ui:message key="myProfile.noresult"/></p>
 	                          </div>
 	    </div> 
   		
         <table id="<%=namespace%>TPTable" class="display responsive nowrap" cellspacing="0" width="100%" style="background-color:#ededed;">
 		  <thead>
 		  <tr>
 	   	<th><liferay-ui:message key="accountName"/></th>
 	   	<th><liferay-ui:message key="accountId"/></th>
 	   	<th><liferay-ui:message key="currencyCd"/></th>
 	   	<th><liferay-ui:message key="balance"/></th>
 	   	<th><liferay-ui:message key="identity"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>
 	   	<th><liferay-ui:message key="fullname"/></th>
 	   	<th><liferay-ui:message key="addressLine1"/></th>
 	   	<th><liferay-ui:message key="zipCode"/></th>
 	   	<th><liferay-ui:message key="state"/></th>
 	   	<th><liferay-ui:message key="city"/></th>
 	   	<th><liferay-ui:message key="phone"/></th>
 	   	<th><liferay-ui:message key="addressLine2"/></th>
 	   	<th><liferay-ui:message key="addressLine3"/></th>
 	   	<th><liferay-ui:message key="holderCountryCd"/></th>
 	   	<th><liferay-ui:message key="identityNum"/></th>
 	   	<th><liferay-ui:message key="email"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>

 	    <%-- <th><liferay-ui:message key="paymentType"/></th> --%>
 	   	<th></th>
 	   	</tr>
 		   </thead>
    		</table>
    		
    		<div id="<%=namespace%>TPTabledialog" title="Basic dialog" style="display:none">
        <div id="<%=namespace%>TPTabledetail"></div>  
    		<!-- <div class="paging-1"></div> -->
    </div>
    
        <div id="<%=namespace%>tpconfirm" style="display:none"><p><liferay-ui:message key="Areyousuretodeletethisaccount"/></p></div>
 </div>
 
    <div id="<%=namespace%>all" class="detail">
   		<div class="noneres">
 	                          <div class="no-icon">
 	                          </div>
 	                          <div class="no-res">
 	                               <p><liferay-ui:message key="myProfile.noresult"/></p>
 	                          </div>
 	    </div> 
   		
         <table id="<%=namespace%>allTable" class="display responsive nowrap" cellspacing="0" width="100%" style="background-color:#ededed;">
 		  <thead>
 		  <tr>
 	   	<th><liferay-ui:message key="accountName"/></th>
 	   	<th><liferay-ui:message key="accountId"/></th>
 	   	<th><liferay-ui:message key="currencyCd"/></th>
 	   	<th><liferay-ui:message key="balance"/></th>
 	   	<th><liferay-ui:message key="identity"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>
 	   	<th><liferay-ui:message key="fullname"/></th>
 	   	<th><liferay-ui:message key="addressLine1"/></th>
 	   	<th><liferay-ui:message key="zipCode"/></th>
 	   	<th><liferay-ui:message key="state"/></th>
 	   	<th><liferay-ui:message key="city"/></th>
 	   	<th><liferay-ui:message key="phone"/></th>
 	   	<th><liferay-ui:message key="addressLine2"/></th>
 	   	<th><liferay-ui:message key="addressLine3"/></th>
 	   	<th><liferay-ui:message key="holderCountryCd"/></th>
 	   	<th><liferay-ui:message key="identityNum"/></th>
 	   	<th><liferay-ui:message key="email"/></th>
 	   	<th><liferay-ui:message key="paymentType"/></th>

 	    <%-- <th><liferay-ui:message key="paymentType"/></th> --%>
 	   	<th></th>
 	   	</tr>
 		   </thead>
    		</table>
    		
    		<div id="<%=namespace%>allTabledialog" title="Basic dialog" style="display:none">
        <div id="<%=namespace%>allTabledetail"></div>  
    		<!-- <div class="paging-1"></div> -->
    </div>
    
        <div id="<%=namespace%>allconfirm" style="display:none"><p><liferay-ui:message key="Areyousuretodeletethisaccount"/></p></div>
 </div>
 </div>
 </div>
   <div id="<%=namespace%>error">
     <div id="<%=namespace%>errordetail"></div>
     </div>


  <aui:script use="aui-base, node, event">

 var userIdValue=<%=userId%>;
 var language = "<%=language %>";

 $('#addAcc').click(function(){
 	selectcurrency();
 })
 $('#addAccreceiver').click(function(){
	 selectcurrency1();
 })
 function getAccountInfor(account){
 	 var js_text ='{"accountName":"'+account.accountName+'","accountId": "'+account.accountId+'","currencyCd": "'+account.currencyCd+'","balance": "'+account.balance+'","identity": "'+account.identity+'","paymenttype": "'+account.paymentType+'","fullname": "'+account.fullName+'","addressLine1": "'+account.addressLine1+'","zipCode": "'+account.zipCode+'","state": "'+account.state+'","city": "'+account.city+'","phone": "'+account.phone+'","addressLine2": "'+account.addressLine2+'","addressLine3": "'+account.addressLine3+'","holderCountryCd": "'+account.holderCountryCd+'","identityNum": "'+account.identityNum+'","email": "'+account.email+'","accountType": "'+account.accountTypeCd+'","detail": "'+account.detailJSON+'"}';
 	 return JSON.parse(js_text);
 }

 if (Liferay.ThemeDisplay.isSignedIn()) {
     Liferay.Service(
     		  '/LmReferenceServices-portlet.countrycurrency/get-currency-country-list',
     		  {
     		    localeCd: "<%=langId %>"
     		  },
     		  function(obj) {
     		    
     		    for(var i=0;i<obj.value.length;i++){
     		        var x = document.getElementById("<%=namespace%>currencyselect1");
     		        var option = document.createElement("option");
     		        option.text = obj.value[i].currencyCd;
     		        option.value=obj.value[i].currencyCd;
     		        x.add(option);
     		    }
     		   Liferay.Service(
     			 		'/LmAccountServices-portlet.account/get-account-with-holder',
     			 		  {
     			 			  userId: userIdValue,
     			 			  localeCd: "<%=langId %>"
     			 		  },
     			 		  function(obj) {
     			 		   active = 'UserAccount';
     			 		   accountinfo = obj.value;
     			 		   currency = $( "#<%=namespace%>currencyselect1 option:selected" ).val();
     			 		   paymenttype = $("#<%=namespace%>paymentselect option:selected").val();
     			           needdata = [];
     			           showdata = [];
     			           if(currency=='allcurrency'){
     			        	   if(paymenttype=='alltype'){
     			        		  for(var i=0;i<accountinfo.length;i++){
              			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
              			        		   needdata.push(getAccountInfor(accountinfo[i]));
              			        	   }
     			        	   }}else{
     			        		  for(var i=0;i<accountinfo.length;i++){
           			        	   if(accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
           			        		   needdata.push(getAccountInfor(accountinfo[i]));
           			        	   }
           			           }
     			        	   }
     			      
     			           }else if(paymenttype=='alltype'){
     			        	  if(currency=='allcurrency'){
     			        		 for(var i=0;i<accountinfo.length;i++){
            			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
            			        		   needdata.push(getAccountInfor(accountinfo[i]));
            			        	   }
   			        	   }
     			        	  }else{
     			        		 for(var i=0;i<accountinfo.length;i++){
             			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
             			        		   needdata.push(getAccountInfor(accountinfo[i]));
             			        	   }
             			           }
     			        	  }
     			           }else{
     			        	  for(var i=0;i<accountinfo.length;i++){
       			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
       			        		   needdata.push(getAccountInfor(accountinfo[i]));
       			        	   }
       			           }
     			           }
     			          
     				         for(var i=0;i<needdata.length;i++){
     				        	 var arr2 = Object.keys(needdata[i]).map(function (key) { return needdata[i][key]; });
     				        	 showdata.push(arr2);
     				         }
     				         if(paymenttype=='alltype'){
     				        	generateallTable(showdata);
     				        	$('#<%=namespace%>DC').css('display','none');
  			                   $('#<%=namespace%>BA').css('display','none');
  			                   $('#<%=namespace%>TP').css('display','none');
  			                   $('#<%=namespace%>all').css('display','block');
     				         }
     				         else if(paymenttype=="BankAccount"){
     				        	generateBATable(showdata);
     				        	 $('#<%=namespace%>DC').css('display','none');
     			                   $('#<%=namespace%>BA').css('display','block');
     			                   $('#<%=namespace%>TP').css('display','none');
     			                  $('#<%=namespace%>all').css('display','none');
     				         }else if(paymenttype=="DebitCard"){
     				        	generateDCTable(showdata);
     				        	$('#<%=namespace%>DC').css('display','block');
   			                   $('#<%=namespace%>BA').css('display','none');
   			                   $('#<%=namespace%>TP').css('display','none');
   			                   $('#<%=namespace%>all').css('display','none');
     				         }else if(paymenttype=="ThirdParty"){
     				        	generateTPTable(showdata);
     				        	 $('#<%=namespace%>DC').css('display','none');
    			                   $('#<%=namespace%>BA').css('display','none');
    			                   $('#<%=namespace%>TP').css('display','block');
    			                   $('#<%=namespace%>all').css('display','none');
     				         }

     			               $('#<%=namespace%>sender').click(function(){
     			            	  $('#addAcc').css('display','block');
     			            	 $('#addAccreceiver').css('display','none');
     			             	  $('#<%=namespace%>sender').css('background',' #2eb452');
     			              	  $('#<%=namespace%>sender').css('color',' white');
     			             	  $('#<%=namespace%>receiver').css('background',' white');
     			             	  $('#<%=namespace%>receiver').css('color',' #2eb452');
     			             	  if(paymenttype=='alltype'){
     			             		$('#<%=namespace%>DC').css('display','none');
       			                   $('#<%=namespace%>BA').css('display','none');
       			                   $('#<%=namespace%>TP').css('display','none');
       			                   $('#<%=namespace%>all').css('display','block');
     			             	  }
     			             	  else if(paymenttype=="BankAccount"){
     			             	   $('#<%=namespace%>DC').css('display','none');
       			                   $('#<%=namespace%>BA').css('display','block');
       			                   $('#<%=namespace%>TP').css('display','none');
       			                   $('#<%=namespace%>all').css('display','none');
     			             	  }else if(paymenttype=="DebitCard"){
     			             	   $('#<%=namespace%>DC').css('display','block');
      			                   $('#<%=namespace%>BA').css('display','none');
      			                   $('#<%=namespace%>TP').css('display','none');
      			                   $('#<%=namespace%>all').css('display','none');
     			             	  }else if(paymenttype=="ThirdParty"){
     			             		   $('#<%=namespace%>DC').css('display','none');
         			                   $('#<%=namespace%>BA').css('display','none');
         			                   $('#<%=namespace%>TP').css('display','block');
         			                  $('#<%=namespace%>all').css('display','none');
     			             	  }
     			                
     			                   active = 'UserAccount';
     			                   needdata = [];
     			                    showdata = [];
     			                /*    for(var i=0;i<accountinfo.length;i++){
     			                	   if(accountinfo[i].currencyCd==currency && accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd=='UserAccount'){
     			                		   needdata.push(getAccountInfor(accountinfo[i]));
     			                	   }
     			                   } */
     	     			           if(currency=='allcurrency'){
     	     			        	   if(paymenttype=='alltype'){
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	              			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	              			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	              			        	   }
     	     			        	   }}else{
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	           			        	   if(accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	           			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	           			        	   }
     	           			           }
     	     			        	   }
     	     			      
     	     			           }else if(paymenttype=='alltype'){
     	     			        	  if(currency=='allcurrency'){
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	            			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	            			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	            			        	   }
     	   			        	   }
     	     			        	  }else{
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	             			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	             			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	             			        	   }
     	             			           }
     	     			        	  }
     	     			           }else{
     	     			        	  for(var i=0;i<accountinfo.length;i++){
     	       			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	       			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	       			        	   }
     	       			           }
     	     			           }
     			        	         for(var i=0;i<needdata.length;i++){
     			        	        	 var arr2 = Object.keys(needdata[i]).map(function (key) { return needdata[i][key]; });
     			        	        	 showdata.push(arr2);
     			        	         }
     			        	         if(paymenttype=='alltype'){
     			        	        	generateallTable(showdata);
     			        	         }
     			        	         else if(paymenttype=="BankAccount"){
     	     				        	generateBATable(showdata);
     	     				         }else if(paymenttype=="DebitCard"){
     	     				        	generateDCTable(showdata);
     	     				         }else if(paymenttype=="ThirdParty"){
     	     				        	generateTPTable(showdata);
     	     				         }
     			               
     			             	});
     			               $('#<%=namespace%>receiver').click(function(){
     			            	  $('#addAcc').css('display','none');
      			            	 $('#addAccreceiver').css('display','block');
     			             	  $('#<%=namespace%>receiver').css('background',' #2eb452');
     			                  $('#<%=namespace%>receiver').css('color',' white');
     			             	  $('#<%=namespace%>sender').css('background',' white');
     			             	  $('#<%=namespace%>sender').css('color',' #2eb452');
     			              	  if(paymenttype=='alltype'){
     			              		$('#<%=namespace%>DC').css('display','none');
       			                   $('#<%=namespace%>BA').css('display','none');
       			                   $('#<%=namespace%>TP').css('display','none');
       			                   $('#<%=namespace%>all').css('display','block');
     			              	  }
     			              	  else if(paymenttype=="BankAccount"){
      			             		 $('#<%=namespace%>DC').css('display','none');
        			                   $('#<%=namespace%>BA').css('display','block');
        			                   $('#<%=namespace%>TP').css('display','none');
        			                   $('#<%=namespace%>all').css('display','none');
      			             	  }else if(paymenttype=="DebitCard"){
      			             		$('#<%=namespace%>DC').css('display','block');
       			                   $('#<%=namespace%>BA').css('display','none');
       			                   $('#<%=namespace%>TP').css('display','none');
       			                   $('#<%=namespace%>all').css('display','none');
      			             	  }else if(paymenttype=="ThirdParty"){
      			             		   $('#<%=namespace%>DC').css('display','none');
          			                   $('#<%=namespace%>BA').css('display','none');
          			                   $('#<%=namespace%>TP').css('display','block');
          			                   $('#<%=namespace%>all').css('display','none');
      			             	  }
     			                    active = 'RecipientAccount';
     			                    needdata = [];
     			                    showdata = [];
     					           if(currency=='allcurrency'){
     	     			        	   if(paymenttype=='alltype'){
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	              			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	              			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	              			        	   }
     	     			        	   }}else{
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	           			        	   if(accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	           			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	           			        	   }
     	           			           }
     	     			        	   }
     	     			      
     	     			           }else if(paymenttype=='alltype'){
     	     			        	  if(currency=='allcurrency'){
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	            			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	            			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	            			        	   }
     	   			        	   }
     	     			        	  }else{
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	             			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	             			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	             			        	   }
     	             			           }
     	     			        	  }
     	     			           }else{
     	     			        	  for(var i=0;i<accountinfo.length;i++){
     	       			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	       			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	       			        	   }
     	       			           }
     	     			           }
     			         	         for(var i=0;i<needdata.length;i++){
     			         	        	 var arr2 = Object.keys(needdata[i]).map(function (key) { return needdata[i][key]; });
     			         	        	 showdata.push(arr2);
     			         	         }
     			         	        if(paymenttype=='alltype'){
    			        	        	generateallTable(showdata);
    			        	         }
     			         	       else if(paymenttype=="BankAccount"){
     	     				        	generateBATable(showdata);
     	     				         }else if(paymenttype=="DebitCard"){
     	     				        	generateDCTable(showdata);
     	     				         }else if(paymenttype=="ThirdParty"){
     	     				        	generateTPTable(showdata);
     	     				         }
     			           	});
     		
     			               
     			 		        A.one("#<%=namespace%>currencyselect1").on('change', function(){
     			 		        	 currency = $( "#<%=namespace%>currencyselect1 option:selected" ).val();
     			 		        	paymenttype = $("#<%=namespace%>paymentselect option:selected").val();
     			                     needdata = [];
     			                     showdata = [];
     			 		           if(currency=='allcurrency'){
     	     			        	   if(paymenttype=='alltype'){
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	              			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	              			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	              			        	   }
     	     			        	   }}else{
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	           			        	   if(accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	           			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	           			        	   }
     	           			           }
     	     			        	   }
     	     			      
     	     			           }else if(paymenttype=='alltype'){
     	     			        	  if(currency=='allcurrency'){
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	            			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	            			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	            			        	   }
     	   			        	   }
     	     			        	  }else{
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	             			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	             			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	             			        	   }
     	             			           }
     	     			        	  }
     	     			           }else{
     	     			        	  for(var i=0;i<accountinfo.length;i++){
     	       			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	       			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	       			        	   }
     	       			           }
     	     			           }
     			         	         for(var i=0;i<needdata.length;i++){
     			         	        	 var arr2 = Object.keys(needdata[i]).map(function (key) { return needdata[i][key]; });
     			         	        	 showdata.push(arr2);
     			         	         }
     			         	       if(paymenttype=='alltype'){
        			              		$('#<%=namespace%>DC').css('display','none');
          			                   $('#<%=namespace%>BA').css('display','none');
          			                   $('#<%=namespace%>TP').css('display','none');
          			                   $('#<%=namespace%>all').css('display','block');
        			              	  }
     			         	       else if(paymenttype=="BankAccount"){
          			             		 $('#<%=namespace%>DC').css('display','none');
            			                   $('#<%=namespace%>BA').css('display','block');
            			                   $('#<%=namespace%>TP').css('display','none');
            			                   $('#<%=namespace%>all').css('display','none');
          			             	  }else if(paymenttype=="DebitCard"){
          			             		$('#<%=namespace%>DC').css('display','block');
           			                   $('#<%=namespace%>BA').css('display','none');
           			                   $('#<%=namespace%>TP').css('display','none');
           			                   $('#<%=namespace%>all').css('display','none');
          			             	  }else if(paymenttype=="ThirdParty"){
          			             		   $('#<%=namespace%>DC').css('display','none');
              			                   $('#<%=namespace%>BA').css('display','none');
              			                   $('#<%=namespace%>TP').css('display','block');
              			                   $('#<%=namespace%>all').css('display','none');
          			             	  }
     			                	 if(paymenttype=='alltype'){
     			        	        	generateallTable(showdata);
     			        	         }
     			                	 else if(paymenttype=='ThirdParty'){
     			         	        	generateTPTable(showdata);
     			         	         }else if(paymenttype=='BankAccount'){
     			         	        	generateBATable(showdata);
     			         	         }else if(paymenttype=='DebitCard'){
     			         	        	generateDCTable(showdata);
     			         	         }

     			 		        });
     			 		        A.one("#<%=namespace%>paymentselect").on('change', function(){
    			 		        	currency = $( "#<%=namespace%>currencyselect1 option:selected" ).val();
    			 		        	paymenttype = $("#<%=namespace%>paymentselect option:selected").val();
    			                     needdata = [];
    			                     showdata = [];
    			  		           if(currency=='allcurrency'){
     	     			        	   if(paymenttype=='alltype'){
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	              			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	              			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	              			        	   }
     	     			        	   }}else{
     	     			        		  for(var i=0;i<accountinfo.length;i++){
     	           			        	   if(accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	           			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	           			        	   }
     	           			           }
     	     			        	   }
     	     			      
     	     			           }else if(paymenttype=='alltype'){
     	     			        	  if(currency=='allcurrency'){
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	            			        	   if(accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	            			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	            			        	   }
     	   			        	   }
     	     			        	  }else{
     	     			        		 for(var i=0;i<accountinfo.length;i++){
     	             			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	             			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	             			        	   }
     	             			           }
     	     			        	  }
     	     			           }else{
     	     			        	  for(var i=0;i<accountinfo.length;i++){
     	       			        	   if(accountinfo[i].currencyCd==currency && accountinfo[i].paymentType==paymenttype && accountinfo[i].accountActiveFlag=="Y" && accountinfo[i].accountTypeCd==active){
     	       			        		   needdata.push(getAccountInfor(accountinfo[i]));
     	       			        	   }
     	       			           }
     	     			           }
    			         	         for(var i=0;i<needdata.length;i++){
    			         	        	 var arr2 = Object.keys(needdata[i]).map(function (key) { return needdata[i][key]; });
    			         	        	 showdata.push(arr2);
    			         	         }	 
    			         	        if(paymenttype=='alltype'){
    			         	           $('#<%=namespace%>DC').css('display','none');
           			                   $('#<%=namespace%>BA').css('display','none');
           			                   $('#<%=namespace%>TP').css('display','none');
           			                   $('#<%=namespace%>all').css('display','block');
    			        	         }
    			         	        else if(paymenttype=="BankAccount"){
    	     			             		 $('#<%=namespace%>DC').css('display','none');
    	       			                   $('#<%=namespace%>BA').css('display','block');
    	       			                   $('#<%=namespace%>TP').css('display','none');
    	       			                $('#<%=namespace%>all').css('display','none');
    	     			             	  }else if(paymenttype=="DebitCard"){
    	     			             		$('#<%=namespace%>DC').css('display','block');
    	      			                   $('#<%=namespace%>BA').css('display','none');
    	      			                   $('#<%=namespace%>TP').css('display','none');
    	      			                 $('#<%=namespace%>all').css('display','none');
    	     			             	  }else if(paymenttype=="ThirdParty"){
    	     			             		   $('#<%=namespace%>DC').css('display','none');
    	         			                   $('#<%=namespace%>BA').css('display','none');
    	         			                   $('#<%=namespace%>TP').css('display','block');
    	         			                  $('#<%=namespace%>all').css('display','none');
    	     			             	  }
    			                 	 if(paymenttype=='alltype'){
     			        	        	generateallTable(showdata);
     			        	         }
    			                 	 else if(paymenttype=='ThirdParty'){
    			         	        	generateTPTable(showdata);
    			         	         }else if(paymenttype=='BankAccount'){
    			         	        	generateBATable(showdata);
    			         	         }else if(paymenttype=='DebitCard'){
    			         	        	generateDCTable(showdata);
    			         	         }

    			 		        });

     			 		    function generateBATable(dataSet){
     	                       
     			 		      	if ( $.fn.DataTable.isDataTable('#<%=namespace%>BATable') ) {
     			 		    		  $('#<%=namespace%>BATable').DataTable().destroy();
     			 		    		  
     			 				    	//console.log(dataSet);
     			 		    		}
     			 		    	if(dataSet.length==0){
     			 		    		 $("#<%=namespace%>BA .noneres").show();
     			 		    	  	 $("#<%=namespace%>BATable").hide();
     			 		    	}else{
     			 		    		 $("#<%=namespace%>BA .noneres").hide();
     			 		    	  	 $("#<%=namespace%>BATable").show();
     
     			 		    
     			 		    		var table = $('#<%=namespace%>BATable').DataTable({
     			 		    		/*     paging: false,
     			 		    		    retrieve: true,
     			 		 		       destory:true,
     			 		 		       responsive:false, */
     			 		 		      "responsive": true, 
     			 		 		   "iDisplayLength": 25,
     			                   //scrollCollapse: true,
     			 		 		     "bSort": false,
     			 		 		      "data":dataSet,
     			 		 		     "oLanguage" : {
     			 		                "sLengthMenu": "<liferay-ui:message key='LengthMenu'/>",
     			 		                "sZeroRecords": "<liferay-ui:message key='ZeroRecords'/>",
     			 		                "sInfo": "<liferay-ui:message key='Info'/>",
     			 		                "sInfoEmpty": "<liferay-ui:message key='InfoEmpty'/>",
     			 		                "sInfoFiltered": "<liferay-ui:message key='InfoFiltered'/>",
     			 		                 "sSearch": "<liferay-ui:message key='Search'/>",
     			 		                "oPaginate": {
     			 		                "sFirst": "<liferay-ui:message key='First'/>",
     			 		                "sPrevious": "<liferay-ui:message key='Previous'/>",
     			 		                "sNext": "<liferay-ui:message key='Next'/>",
     			 		                "sLast": "<liferay-ui:message key='Last'/>"
     			 		                 }
     			 		                 },
     			 		 		      "columnDefs": [ {
     			 		 	                "targets": -1,
     			 		 	                "data": null,
     			 		 	                "defaultContent": "<a class='deactive' style='cursor: pointer;'>"+'<liferay-ui:message key="View"/>'+"</a>"
     			 		 	                //"defaultContent": "<div><a href='#' class='view'>"+'<liferay-ui:message key="deactive"/>'+"</a></div>"
     			 		 	              }
     			 		 	                   ,{
     			 		 	                    "targets": [6],
     			 		 	                    "visible": true,
     			 		 	                    "searchable": false
     			 		 	                }   
     			 		 	                   ,{
     			 		 	                    "targets": [2],
     			 		 	                    "visible": false,
     			 		 	                    "searchable": false
     			 		 	                }       
     			 		 	                  ,{
     			 			 	                    "targets": [3,5,6,7,8,9,10,11,12,13,14,15,16,17,18],
     			 			 	                    "visible": false,
     			 			 	                    "searchable": false
     			 			 	                } 
     			 		 	               ]
     			 		 		    	})
     			 		    	
     			 		    	$('#<%=namespace%>BATable tbody').off( 'click.rowClick' ).on( 'click.rowClick', '.deactive', function () 
     			 		    			{ 
     		
     			                     var newindex=table.row($(this).closest('tr')).index();
     			                     if(newindex==undefined){
     			                    	 newindex=table.row($(this).closest('tr').prev()).index();
     			                     }
     			                     var accountid = dataSet[newindex][1];
     			     			     var accountname = dataSet[newindex][0];
     			     			     var identity = dataSet[newindex][4];
     			     			     var fullName = dataSet[newindex][6];
     			     			     var email = dataSet[newindex][16];
     			     			     var addressLine1 = dataSet[newindex][7];
     			     			     var addressLine2 = dataSet[newindex][12];
     			     			     var addressLine3 = dataSet[newindex][13];
     			     			     var city = dataSet[newindex][10];
     			     			     var state = dataSet[newindex][9];
     			     			     var zipcode = dataSet[newindex][8];
     			     			     var countryCd = dataSet[newindex][14];
     			     			     var phone = dataSet[newindex][11];
     			     			     var identityNum = dataSet[newindex][15];
                                     var pmtType = dataSet[newindex][5];
                                     var detail = dataSet[newindex][18];
                                     var routing = dataSet[newindex][18].match(/routingNumber=\'([0-9]+)/);
                                     if(routing!=null){
                                    	 var routnum = routing[0].replace("routingNumber='","");
                                     }else{
                                    	 var routnum = '';
                                     }
                                     
                                    /*  console.log(routing);
                                     console.log(routnum); */
     			                     window.index=newindex;
     			                     
     			                     var data=dataSet[window.index];
     			                    
     			                             if($(window).width()>600){
     			                           	  var screenWidth = '500px';
     			                             }else{
     			                           	  var screenWidth = '300px';
     			                             }
     			                             $('#<%=namespace%>BATabledialog').dialog({
     			 	    		    	        title: '<liferay-ui:message key="details"/>',
     			 	    		     	        modal: true,
     			 	    		     	        width: screenWidth,
     			 	    		     	        height:'auto',
     			 	    		     	        resizable:false,
     			 	    		     	        position: { my: "center", at: "center", of: window },
     			 	    		     	       open: function(){
     			 		    		     	    	  $('#<%=namespace%>BATabledetail').html('<div class="sendtable"><table>\
     			 		    	         	               <tr><td>'+'<liferay-ui:message key="accountName"/>'+':</td><td>'+data[0]+'</td></tr>\
     			 		    	         	               <tr><td>'+'<liferay-ui:message key="currencyCd"/>'+':</td><td>'+data[2]+'</td></tr>\
     			 		    	  	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+':</td><td>'+data[6]+'</td></tr>\
 			 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td>'+data[16]+'</td></tr>\
 			 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+':</td><td>'+data[4]+'</td></tr>\
 			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td>'+data[7]+'</td></tr>\
 			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td>'+data[12]+'</td></tr>\
 			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td>'+data[13]+'</td></tr>\
 			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td>'+data[10]+'</td></tr>\
 			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td>'+data[9]+'</td></tr>\
 			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td>'+data[8]+'</td></tr>\
 			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="countryCd"/>'+':</td><td>'+data[14]+'</td></tr>\
 			 		    	         	                   <tr><td>'+'<liferay-ui:message key="phone"/>'+':</td><td>'+data[11]+'</td></tr>\
 			 		    	         	                   <tr><td>'+'<liferay-ui:message key="routing"/>'+':</td><td>'+routnum+'</td></tr>\
     			 		    	         	                   </table></div>')
     			 		    	         	           
     			 		    		     	       },
     			 	    		     	       buttons: [
     			 	    		     	              
     			 	    
     			 	    		          			  {
     			 	    		     	                	 text:'<liferay-ui:message key="edit"/>',
      			 	    		          			        click: function() { 
 			 	    		          			        		$('#<%=namespace%>BATabledialog').dialog('close');
 			 	    		          			        		$('#<%=namespace%>editinfo').dialog({
 			 	    		          			        			
 			 	    		          			        			title:'<liferay-ui:message key="edit"/>',
 			 	    		          			        		    modal: true,
 			 	     			 	    		     	            width: screenWidth,
 			 	     			 	    		     	            height:'auto',
 			 	     			 	    		     	             resizable:false,
 			 	     			 	    		     	             position: { my: "center", at: "center", of: window },
 			 	    		          			      	            open: function(){
 			     			 		    		     	    	        $('#<%=namespace%>editinfodetail').html('<div ><table>\
 			     			 		    		     	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="fullname" value="'+data[6]+'"></td><td style="display:none" id="fullnamealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
 			        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td><input type="text" id="email" value="'+data[16]+'"></td></tr>\
 			        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="identity" value="'+data[4]+'"></td><td style="display:none" id="identityalert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p><td></tr>\
 			        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td><input type="text" id="add1" value="'+data[7]+'"></td></tr>\
 			        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td><input type="text" id="add2" value="'+data[12]+'"></td></tr>\
 			        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td><input type="text" id="add3" value="'+data[13]+'"></td></tr>\
 			        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td><input type="text" id="city" value="'+data[10]+'"></td></tr>\
 			        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td><input type="text" id="state" value="'+data[9]+'"></td></tr>\
 			        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td><input type="text" id="zipcode" value="'+data[8]+'"></td></tr>\
 			        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="phone"/>'+'<span class="phonemust" style="color:red;margin:5px;display:none">*</span>:</td><td><input type="text" id="phone" value="'+data[11]+'"></td><td style="display:none" id="phonealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
 			        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="routing"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input onkeydown="return (event.which >= 48 && event.which <= 57)|| event.which == 8" type="text" id="routnum" value="'+routnum+'"></td><td style="display:none" id="routnumalert"><p style="color:red"><liferay-ui:message key="wrongformat"/></p><td></tr>\
 			     			 		    	         	                   </table></div>');
 			        			 		    	         	                if(data[17]=="UserAccount"){
 					     			 		    		     	    	    	 $('.phonemust').show();
 					     			 		    		     	    	     }
 			     			 		    	         	               
 			     			 		    		     	           },
 			 	    		          			        			buttons:[
 			 	    		          			        			         {
 			 	    		          			        			        	 text:'<liferay-ui:message key="save"/>',
 			 	    		          			        			        	 click:function(){
 			 	    		          			        			        		       var flag = false;
 			 	    		          			        			        	     	   var newfullname = $('#fullname').val();
 			 	    		          			        			        	     	   if(newfullname==""){
 			 	    		          			        			        	     		   $('#fullnamealert').css('display','block');
 			 	    		          			        			        	     	   }else{
 			 	    		          			        			        	     		$('#fullnamealert').css('display','none');
 			 	    		          			        			        	     	   }
 			 	    		          			        			        	     	   var newemail = $('#email').val();
 			 	    		          			        			        	     	
 			 	    		          			        			        	           var newadd1 = $('#add1').val();
 			 	    		          			        			        	       
 			 	    		          			        			        	           var newidentity = $('#identity').val();
 			 	    		          			        			        	       if(newidentity==""){
			 	    		          			        			        	     		   $('#identityalert').css('display','block');
			 	    		          			        			        	     	   }else{
			 	    		          			        			        	     		$('#identityalert').css('display','none');
			 	    		          			        			        	     	   }
 			 	    		          			        			        	           var newadd2 = $('#add2').val();
 			 	    		          			        			        	           var newadd3 = $('#add3').val();
 			 	    		          			        			        	           var newcity = $('#city').val();
 			 	    		          			        			        	      
 			 	    		          			        			        	           var newstate = $('#state').val();
 			 	    		          			        			        	      
 			 	    		          			        			                       var newzipcode = $('#zipcode').val();
 			 	    		          			        			                  
 			 	    		          			        			                       var newphone = $('#phone').val();
 			 	    		          			        			                    if(data[17]=="UserAccount"){
 			 	    		          			        			                    	 if(newphone==""){
 			 	    		          			        			                    		   $('#phonealert').show();
 			 	    		          			        			                    	   }else{
 			 	    		          			        			                    		$('#phonealert').hide();
 			 	    		          			        			                    	   }
 			 	    		          			        			                       }
 			 	    		          			        			                       var newidentitynum = $('#identitynum').val();
 			 	    		          			        			                
 			 	    		          			        			                       var oldroutnum = "routingNumber='"+routnum+"'";
 			 	    		          			        			                       var newroutnum = "routingNumber='"+$('#routnum').val()+"'";
 			 	    		          			        			                    if(!($('#routnum').val().match(/^\d+$/))){
		 	    		          			        			        	     		   $('#routnumalert').css('display','block');
		 	    		          			        			        	     	   }else{
		 	    		          			        			        	     		$('#routnumalert').css('display','none');
		 	    		          			        			        	     	   }
 			 	    		          			        			                       var newdetail = data[18].replace(oldroutnum,newroutnum);
 			 	    		          			        			                       if(data[17]=="UserAccount"){
 			 	    		          			        			                    	if(newfullname!=""&&newidentity!=""&& ($('#routnum').val().match(/^\d+$/))&&newphone!=""){
  			 	    		          			        			                    	   flag = true;
  			 	    		          			        			                       }
 			 	    		          			        			                       }else{
 			 	    		          			        			                    	if(newfullname!=""&&newidentity!=""&& ($('#routnum').val().match(/^\d+$/))){
  			 	    		          			        			                    	   flag = true;
  			 	    		          			        			                       }
 			 	    		          			        			                       }
 			 	    		          			        			                       
 			 	    		          			        			                       if(flag){
 			 	    					    		                                      	Liferay.Service(
 			 	    					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
 			 	    					    		                                    			  {
 			 	    					    		                                    				accountId: accountid,
 			 	    					    		                                    			    accountName: accountname,
 			 	    					    		                                    			    accountDetailObject: newdetail,
 			 	    					    		                                    			    identity:newidentity,
 			 	    					    		                                    			    pmtType:pmtType,
 			 	    					    		                                    			    activeFlag: 'Y',
 			 	    					    		                                    			    expDate:'',
 			 	    					    		                                    			    pwd:'',
 			 	    					    		                                    			    fullName: newfullname,
 			 	    					    		                                    			    firstName: '',
 			 	    					    		                                    			    lastName: '',
 			 	    					    		                                    			    middleName: '',
 			 	    					    		                                    			    email: newemail,
 			 	    					    		                                    			    addressLine1: newadd1,
 			 	    					    		                                    			    addressLine2: newadd2,
 			 	    					    		                                    			    addressLine3: newadd3,
 			 	    					    		                                    			    city: newcity,
 			 	    					    		                                    			    state: newstate,
 			 	    					    		                                    			    zipCode: newzipcode,
 			 	    					    		                                    			    countryCd: countryCd,
 			 	    					    		                                    			    phone: newphone,
 			 	    					    		                                    			    identityNum: "",
 			 	    					    		                                    			    localeCd: "<%=langId %>"
 			 	    					    		                                    			  },function(response){
 			 	    					    		                                    				if(response.status.code==200){
 			 	    					    		                                    					 dataSet[newindex][4] = newidentity;
 		 			 	    					    		                  			     			     dataSet[newindex][6] = newfullname;
 		 			 	    					    		                  			     			     dataSet[newindex][16] = newemail;
 		 			 	    					    		                  			     			     dataSet[newindex][7] = newadd1;
 		 			 	    					    		                  			     			     dataSet[newindex][12] = newadd2;
 		 			 	    					    		                  			     			     dataSet[newindex][13] = newadd3;
 		 			 	    					    		                  			     			     dataSet[newindex][10] = newcity;
 		 			 	    					    		                  			     			     dataSet[newindex][9] = newstate;
 		 			 	    					    		                  			     			     dataSet[newindex][8] = newzipcode;
 		 			 	    					    		                  			     			     dataSet[newindex][11] = newphone;
 		 			 	    					    		                  			     			     dataSet[newindex][18] = newdetail;
 		 			 	      			 	    					    		                              for(var i=0;i<accountinfo.length;i++){
 		 			 	      			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
 		 			 	      			 	    					    		                            	   accountinfo[i].identity = newidentity;
 		 			 	      			 	    					    		                            	   accountinfo[i].fullName = newfullname;
 		 			 	      			 	    					    		                            	   accountinfo[i].email = newemail;
 		 			 	      			 	    					    		                            	   accountinfo[i].addressLine1 = newadd1;
 		 			 	      			 	    					    		                            	   accountinfo[i].addressLine2 = newadd2;
 		 			 	      			 	    					    		                            	   accountinfo[i].addressLine3 = newadd3;
 		 			 	      			 	    					    		                            	   accountinfo[i].city = newcity;
 		 			 	      			 	    					    		                                   accountinfo[i].state = newstate;
 		 			 	      			 	    					    		                                   accountinfo[i].zipCode = newzipcode;
 		 			 	      			 	    					    		                                   accountinfo[i].phone = newphone;
 		 			 	      			 	    					    		                                   accountinfo[i].detailJSON = newdetail;
 		 			 	      			 	    					    		                                   break;
 		 			 	      			 	    					    		                            	  }
 		 			 	      			 	    					    		                              }
 		 			 	      			 	    					    		                               generateBATable(dataSet);
 		 			 	      			 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close'); 
 			 	    					    		                                    				}else{
 			 	    					    		                                    					$('#<%=namespace%>editinfo').dialog('close');
 			 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
 			 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
 			 	    					                                 			        			        modal: true,
 			 	    					                                 			        			        width: screenWidth,
 			 	    					                                 			        			        height:'auto',
 			 	    					                                 			        			        resizable:false,
 			 	    					                                 			        			        position: { my: "center", at: "center", of: window },
 			 	    					                                 			        			        open: function(){
 			 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
 			 	    					                                 			        			        	
 			 	    					                                 			        			        },
 			 	    					                                 			        			        buttons:[
 			 	    					                                 			        			                 {
 			 	    					                                 			        			                	id:'error',
 			 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
 			 	    					                                 			        	         			        click: function() {
 			 	    					                                 			        	         			        	
 			 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
 			 	    					                                 			        	         			        }
 			 	    					                                 			        			                 }
 			 	    					                                 			        			                 
 			 	    					                                 			        			                 ]
 			 	    					                                 			        				})
 			 	    					    		                                    				}
 			 	    					    		                                    				//location.reload(true);
 			 	    					    		                  			     		 	    
 			 	    					    		                                    				  
 			 	    					    		                                    			  }) }
 			 	    					    		                                   	 	    					    		          		
 			 	    		          			        			        	 }
 			 	    		          			        			         },
 			 	    		          			        			         {
 			 	    		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
 			 	    		          			        			        	 click:function(){
 			 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close');
 			 	    		          			        			        	 }
 			 	    		          			        			         }
 			 	    		          			        			         
 			 	    		          			        			         ]
 			 	    		          			        		
 			 	    		          			        			
 			 	    		          			        		})
 			 	    		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
 			 	    		   	    		        	     $(".ui-dialog-title").css("color", "white");
 			 	    		   	    		        	     $(".ui-dialog").css("position", "center");
 			 	    		          			        	
 			 	    		          			        }
     			 	    		     	                 },
     			 	    		     	      	    {   id:'delete',
      			 	    		          			        text: '<liferay-ui:message key="Deletethisaccount"/>',
      			 	    		          			        //open: function() { $(this).addClass('b') }, //will append a class called 'b' to the created 'OK' button.
      			 	    		          			        click: function() { 
      			 	    		          			        	
      			 	    		          			        	
      			 	    		          			        		$('#<%=namespace%>BATabledialog').dialog('close');
      			 	    		          			        		$('#<%=namespace%>baconfirm').dialog({
      			 	    		          			        			title:'<liferay-ui:message key="delete"/>',
      			 	    		          			        			modal: true,
      			 	    		          			        			buttons:[
      			 	    		          			        			         {
      			 	    		          			        			        	 text:'<liferay-ui:message key="confirm"/>',
      			 	    		          			        			        	 click:function(){
      			 	    		          			        			        	     	    		          		
      			 	    					    		                                     	Liferay.Service(
      			 	    					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
      			 	    					    		                                    			  {
      			 	    					    		                                    				accountId: accountid,
      			 	    					    		                                    			    accountName: accountname,
      			 	    					    		                                    			    accountDetailObject: data[18],
      			 	    					    		                                    			    identity:identity,
      			 	    					    		                                    			    pmtType:pmtType,
      			 	    					    		                                    			    activeFlag: 'N',
      			 	    					    		                                    			    expDate:'',
    			 	    					    		                                    			        pwd:'',
      			 	    					    		                                    			    fullName: fullName,
      			 	    					    		                                    			    firstName: '',
      			 	    					    		                                    			    lastName: '',
      			 	    					    		                                    			    middleName: '',
      			 	    					    		                                    			    email: email,
      			 	    					    		                                    			    addressLine1: addressLine1,
      			 	    					    		                                    			    addressLine2: addressLine2,
      			 	    					    		                                    			    addressLine3: addressLine3,
      			 	    					    		                                    			    city: city,
      			 	    					    		                                    			    state: state,
      			 	    					    		                                    			    zipCode: zipcode,
      			 	    					    		                                    			    countryCd: countryCd,
      			 	    					    		                                    			    phone: phone,
      			 	    					    		                                    			    identityNum: "",
      			 	    					    		                                    			    localeCd: "<%=langId %>"
      			 	    					    		                                    			  },function(response){
      			 	    					    		                                    				//console.log(response);
      			 	    					    		                                    				if(response.status.code==200){
      			 	    					    		                                    					dataSet.splice(window.index, 1);
      	     			 	      			 	    					    		                              for(var i=0;i<accountinfo.length;i++){
      	     			 	      			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
      	     			 	      			 	    					    		                            		accountinfo.splice(i,1);
      	     			 	      			 	    					    		                            		break;
      	     			 	      			 	    					    		                            	  }
      	     			 	      			 	    					    		                              }
      	     			 	      			 	    					    		                               generateBATable(dataSet);
      	     			 	      			 	    		          			        			        		$('#<%=namespace%>baconfirm').dialog('close');
      	     			 	    					    		                                    				  
      			 	    					    		                                    				}else{
      			 	    					    		                                    					$('#<%=namespace%>baconfirm').dialog('close');
      			 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
      			 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
      			 	    					                                 			        			        modal: true,
      			 	    					                                 			        			        width: screenWidth,
      			 	    					                                 			        			        height:'auto',
      			 	    					                                 			        			        resizable:false,
      			 	    					                                 			        			        position: { my: "center", at: "center", of: window },
      			 	    					                                 			        			        open: function(){
      			 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
      			 	    					                                 			        			        	
      			 	    					                                 			        			        },
      			 	    					                                 			        			        buttons:[
      			 	    					                                 			        			                 {
      			 	    					                                 			        			                	id:'error',
      			 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
      			 	    					                                 			        	         			        click: function() {
      			 	    					                                 			        	         			        	
      			 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
      			 	    					                                 			        	         			        }
      			 	    					                                 			        			                 }
      			 	    					                                 			        			                 
      			 	    					                                 			        			                 ]
      			 	    					                                 			        				})
      			 	    					    		                                    				}
      			 	      			 	    		          			        			        	   
      			 	    					    		                                    			  })
      			 	    					    		                                   	 	    					    		          		
      			 	    		          			        			        	 }
      			 	    		          			        			         },
      			 	    		          			        			         {
      			 	    		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
      			 	    		          			        			        	 click:function(){
      			 	    		          			        			        		$('#<%=namespace%>baconfirm').dialog('close');
      			 	    		          			        			        	 }
      			 	    		          			        			         }
      			 	    		          			        			         
      			 	    		          			        			         ]
      			 	    		          			        		
      			 	    		          			        			
      			 	    		          			        		})
      			 	    		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
      			 	    		   	    		        	     $(".ui-dialog-title").css("color", "white");
      			 	    		   	    		        	     $(".ui-dialog").css("position", "center");
      			 	    		          			        	
      			 	    		          			        }
      			 	    		          			    },
     			 	    		          			  ]
     			 	    			    	 
     			 	    			    	 
     			 	    			     });
     			                    	     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
     			 		        	     $(".ui-dialog-title").css("color", "white");
     			 		        	     $(".ui-dialog").css("position", "center");
     			 		    			   
     			 		    			});
     			 		    	}
     			 		    };
     			 		    function generateTPTable(dataSet){
     			 		    	/* for(var i=0;i<dataSet.length;i++){
     			 		    	    dataSet[i][5]=<liferay-ui:message key="lm.remittance.paymentTypeThirdParty"/>
     			 		    	}  */  
     			 	    		/* $(".noneressend").css("display","none");
     			 	    		$("#<%=namespace%>SEND").css("display","block"); */
     			 	      	if ( $.fn.DataTable.isDataTable('#<%=namespace%>TPTable') ) {
     			 	    		  $('#<%=namespace%>TPTable').DataTable().destroy();
     			 	    		  
     			 			    	//console.log(dataSet);
     			 	    		}
     			 	      	if(dataSet.length==0){
     			 	    		 $("#<%=namespace%>TP .noneres").show();
     			 	    	  	 $("#<%=namespace%>TPTable").hide();
     			 	    	}else{
     			 	    		 $("#<%=namespace%>TP .noneres").hide();
     			 	    	  	 $("#<%=namespace%>TPTable").show();
  
     			 	    		var table = $('#<%=namespace%>TPTable').DataTable({
     			 	    		/*     paging: false,
     			 	    		    retrieve: true,
     			 	 		       destory:true,
     			 	 		       responsive:false, */
     			 	 		      "responsive": true, 
     			 	 		   "iDisplayLength": 25,
     			                   //scrollCollapse: true,
     			 	 		     "bSort": false,
     			 	 		      "data":dataSet,
     			 	 		     "oLanguage" : {
     			 	                "sLengthMenu": "<liferay-ui:message key='LengthMenu'/>",
 			 		                "sZeroRecords": "<liferay-ui:message key='ZeroRecords'/>",
 			 		                "sInfo": "<liferay-ui:message key='Info'/>",
 			 		                "sInfoEmpty": "<liferay-ui:message key='InfoEmpty'/>",
 			 		                "sInfoFiltered": "<liferay-ui:message key='InfoFiltered'/>",
 			 		                 "sSearch": "<liferay-ui:message key='Search'/>",
 			 		                "oPaginate": {
 			 		                "sFirst": "<liferay-ui:message key='First'/>",
 			 		                "sPrevious": "<liferay-ui:message key='Previous'/>",
 			 		                "sNext": "<liferay-ui:message key='Next'/>",
 			 		                "sLast": "<liferay-ui:message key='Last'/>"
     			 	                 }
     			 	                 },
     			 	 		      "columnDefs": [ {
     			 	 	                "targets": -1,
     			 	 	                "data": null,
     			 	 	                "defaultContent": "<a class='deactive' style='cursor: pointer;'>"+'<liferay-ui:message key="View"/>'+"</a>"
     			 	 	                //"defaultContent": "<div><a href='#' class='view'>"+'<liferay-ui:message key="deactive"/>'+"</a></div>"
     			 	 	              }
     			 	 	                   ,{
     			 	 	                    "targets": [6],
     			 	 	                    "visible": true,
     			 	 	                    "searchable": false
     			 	 	                }   
     			 	 	                   ,{
     			 	 	                    "targets": [2],
     			 	 	                    "visible": false,
     			 	 	                    "searchable": false
     			 	 	                }       
     			 	 	                  ,{
     			 		 	                    "targets": [3,5,6,7,8,9,10,11,12,13,14,15,16,17],
     			 		 	                    "visible": false,
     			 		 	                    "searchable": false
     			 		 	                } 
     			 	 	               ]
     			 	 		    	})
     			 	    	$('#<%=namespace%>TPTable tbody').off( 'click.rowClick' ).on( 'click.rowClick', '.deactive', function () 
     			 	    			{ 

     			                 var newindex=table.row($(this).closest('tr')).index();
     			                 if(newindex==undefined){
     			                	 newindex=table.row($(this).closest('tr').prev()).index();
     			                 }
 			                     var accountid = dataSet[newindex][1];
 			     			     var accountname = dataSet[newindex][0];
 			     			     var identity = dataSet[newindex][4];
 			     			     var fullName = dataSet[newindex][6];
 			     			     var email = dataSet[newindex][16];
 			     			     var addressLine1 = dataSet[newindex][7];
 			     			     var addressLine2 = dataSet[newindex][12];
 			     			     var addressLine3 = dataSet[newindex][13];
 			     			     var city = dataSet[newindex][10];
 			     			     var state = dataSet[newindex][9];
 			     			     var zipcode = dataSet[newindex][8];
 			     			     var countryCd = dataSet[newindex][14];
 			     			     var phone = dataSet[newindex][11];
 			     			     var identityNum = dataSet[newindex][15];
                                 var pmtType = dataSet[newindex][5];
                                 var detail = dataSet[newindex][18];
                                 
     			                 window.index=newindex;
     			                 
     			                 var data=dataSet[window.index];
     			                 
     			                         if($(window).width()>600){
     			                       	  var screenWidth = '500px';
     			                         }else{
     			                       	  var screenWidth = '300px';
     			                         }
     			                         $('#<%=namespace%>TPTabledialog').dialog({
     			     		    	        title: '<liferay-ui:message key="details"/>',
     			     		     	        modal: true,
     			     		     	        width: screenWidth,
     			     		     	        height:'auto',
     			     		     	        resizable:false,
     			     		     	        position: { my: "center", at: "center", of: window },
     			     		     	       open: function(){
     			 	    		     	    	  $('#<%=namespace%>TPTabledetail').html('<div class="sendtable"><table>\
     			 	    		     	    			<tr><td>'+'<liferay-ui:message key="accountName"/>'+':</td><td>'+data[0]+'</td></tr>\
  			 		    	         	               <tr><td>'+'<liferay-ui:message key="currencyCd"/>'+':</td><td>'+data[2]+'</td></tr>\
  			 		    	  	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+':</td><td>'+data[6]+'</td></tr>\
			 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td>'+data[16]+'</td></tr>\
			 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+':</td><td>'+data[4]+'</td></tr>\
			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td>'+data[7]+'</td></tr>\
			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td>'+data[12]+'</td></tr>\
			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td>'+data[13]+'</td></tr>\
			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td>'+data[10]+'</td></tr>\
			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td>'+data[9]+'</td></tr>\
			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td>'+data[8]+'</td></tr>\
			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="countryCd"/>'+':</td><td>'+data[14]+'</td></tr>\
			 		    	         	                   <tr><td>'+'<liferay-ui:message key="phone"/>'+':</td><td>'+data[11]+'</td></tr>\
     			 	    	         	                   </table></div>')
     			 	    		     	       },
     			     		     	       buttons: [
     			     		     	              
     			     		          		
     			     		          			  {
     			     		          				 text:'<liferay-ui:message key="edit"/>',
			 	    		          			        click: function() { 
			 	    		    
		 	    		          			        		$('#<%=namespace%>TPTabledialog').dialog('close');
		 	    		          			        		$('#<%=namespace%>editinfo').dialog({
		 	    		          			        			
		 	    		          			        			title:'<liferay-ui:message key="edit"/>',
		 	    		          			        		    modal: true,
		 	     			 	    		     	            width: screenWidth,
		 	     			 	    		     	            height:'auto',
		 	     			 	    		     	             resizable:false,
		 	     			 	    		     	             position: { my: "center", at: "center", of: window },
		 	    		          			      	            open: function(){
		     			 		    		     	    	        $('#<%=namespace%>editinfodetail').html('<div ><table>\
		     			 		    		     	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="fullname" value="'+data[6]+'"></td><td style="display:none" id="fullnamealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
		        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td><input type="text" id="email" value="'+data[16]+'"></td></tr>\
		        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="identity" value="'+data[4]+'"></td><td style="display:none" id="identityalert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
		        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td><input type="text" id="add1" value="'+data[7]+'"></td></tr>\
		        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td><input type="text" id="add2" value="'+data[12]+'"></td></tr>\
		        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td><input type="text" id="add3" value="'+data[13]+'"></td></tr>\
		        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td><input type="text" id="city" value="'+data[10]+'"></td></tr>\
		        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td><input type="text" id="state" value="'+data[9]+'"></td></tr>\
		        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td><input type="text" id="zipcode" value="'+data[8]+'"></td></tr>\
		        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="phone"/>'+'<span class="phonemust" style="color:red;margin:5px;display:none">*</span>:</td><td><input type="text" id="phone" value="'+data[11]+'"></td><td style="display:none" id="phonealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
		     			 		    	         	                   </table></div>');
		     			 		    		     	    	     if(data[17]=="UserAccount"){
		     			 		    		     	    	    	 $('.phonemust').show();
		     			 		    		     	    	     }
		     			 		    		     	           },
		 	    		          			        			buttons:[
		 	    		          			        			         {
		 	    		          			        			        	 text:'<liferay-ui:message key="save"/>',
		 	    		          			        			        	 click:function(){
		 	    		          			        			        		 var flag = false;
		 	    		          			        			        	     	   var newfullname = $('#fullname').val();
		 	    		          			        			        	        if(newfullname==""){
		 	    		          			        			        	     		   $('#fullnamealert').css('display','block');
		 	    		          			        			        	     	   }else{
		 	    		          			        			        	     		$('#fullnamealert').css('display','none');
		 	    		          			        			        	     	   }
		 	    		          			        			        	     	   var newemail = $('#email').val();
		 	    		          			        			        	       
		 	    		          			        			        	           var newadd1 = $('#add1').val();
		 	    		          			        			        	       
		 	    		          			        			        	           var newidentity = $('#identity').val();
		 	    		          			        			        	        if(newidentity==""){
		 	    		          			        			        	     		   $('#identityalert').css('display','block');
		 	    		          			        			        	     	   }else{
		 	    		          			        			        	     		$('#identityalert').css('display','none');
		 	    		          			        			        	     	   }
		 	    		          			        			        	           var newadd2 = $('#add2').val();
		 	    		          			        			        	           var newadd3 = $('#add3').val();
		 	    		          			        			        	           var newcity = $('#city').val();
		 	    		          			        			        	        
		 	    		          			        			        	           var newstate = $('#state').val();
		 	    		          			        			        	        
		 	    		          			        			                       var newzipcode = $('#zipcode').val();
		 	    		          			        			                    
		 	    		          			        			                       var newphone = $('#phone').val();
		 	    		          			        			                       if(data[17]=="UserAccount"){
		 	    		          			        			                    	 if(newphone==""){
		 	    		          			        			                    		   $('#phonealert').show();
		 	    		          			        			                    	   }else{
		 	    		          			        			                    		$('#phonealert').hide();
		 	    		          			        			                    	   }
		 	    		          			        			                       }
		 	    		          			        			                       var newidentitynum = $('#identitynum').val(); 
		 	    		          			        			                    if(data[17]=="UserAccount"){
		 	    		          			        			                    	if(newfullname!=""&&newidentity!=""&&newphone!=""){
			 	    		          			        			                    	   flag = true;
			 	    		          			        			                       }
		 	    		          			        			                    }else{
		 	    		          			        			                    	if(newfullname!=""&&newidentity!=""){
			 	    		          			        			                    	   flag = true;
			 	    		          			        			                       }
		 	    		          			        			                    }
		 	    		          			        			                   
		 	    		          			        			                    if(flag){
		 	    					    		                                      	Liferay.Service(
		 	    					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
		 	    					    		                                    			  {
		 	    					    		                                    				accountId: accountid,
		 	    					    		                                    			    accountName: accountname,
		 	    					    		                                    			    accountDetailObject: detail,
		 	    					    		                                    			    identity:newidentity,
		 	    					    		                                    			    pmtType:pmtType,
		 	    					    		                                    			    activeFlag: 'Y',
		 	    					    		                                    			    expDate:'',
		 	    					    		                                    			    pwd:'',
		 	    					    		                                    			    fullName: newfullname,
		 	    					    		                                    			    firstName: '',
		 	    					    		                                    			    lastName: '',
		 	    					    		                                    			    middleName: '',
		 	    					    		                                    			    email: newemail,
		 	    					    		                                    			    addressLine1: newadd1,
		 	    					    		                                    			    addressLine2: newadd2,
		 	    					    		                                    			    addressLine3: newadd3,
		 	    					    		                                    			    city: newcity,
		 	    					    		                                    			    state: newstate,
		 	    					    		                                    			    zipCode: newzipcode,
		 	    					    		                                    			    countryCd: countryCd,
		 	    					    		                                    			    phone: newphone,
		 	    					    		                                    			    identityNum: "",
		 	    					    		                                    			    localeCd: "<%=langId %>"
		 	    					    		                                    			  },function(response){
		 	    					    		                                    				  //console.log(response);
		 	    					    		                                    				 //location.reload(true);
		 	    					    		                                    				 if(response.status.code==200){
		 	    					    		                                    				    dataSet[newindex][4] = newidentity;
				 	    					    		                  			     			     dataSet[newindex][6] = newfullname;
				 	    					    		                  			     			     dataSet[newindex][16] = newemail;
				 	    					    		                  			     			     dataSet[newindex][7] = newadd1;
				 	    					    		                  			     			     dataSet[newindex][12] = newadd2;
				 	    					    		                  			     			     dataSet[newindex][13] = newadd3;
				 	    					    		                  			     			     dataSet[newindex][10] = newcity;
				 	    					    		                  			     			     dataSet[newindex][9] = newstate;
				 	    					    		                  			     			     dataSet[newindex][8] = newzipcode;
				 	    					    		                  			     			     dataSet[newindex][11] = newphone;
				 	      			 	    					    		                              for(var i=0;i<accountinfo.length;i++){
				 	      			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
				 	      			 	    					    		                            	   accountinfo[i].identity = newidentity;
				 	      			 	    					    		                            	   accountinfo[i].fullName = newfullname;
				 	      			 	    					    		                            	   accountinfo[i].email = newemail;
				 	      			 	    					    		                            	   accountinfo[i].addressLine1 = newadd1;
				 	      			 	    					    		                            	   accountinfo[i].addressLine2 = newadd2;
				 	      			 	    					    		                            	   accountinfo[i].addressLine3 = newadd3;
				 	      			 	    					    		                            	   accountinfo[i].city = newcity;
				 	      			 	    					    		                                   accountinfo[i].state = newstate;
				 	      			 	    					    		                                   accountinfo[i].zipCode = newzipcode;
				 	      			 	    					    		                                   accountinfo[i].phone = newphone;  
				 	      			 	    					    		                                   break;
				 	      			 	    					    		                            	  }
				 	      			 	    					    		                              }
				 	      			 	    					    		                               generateTPTable(dataSet);
				 	      			 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close'); 
		 	    					    		                                    				 }else{
		 	    					    		                                    					$('#<%=namespace%>editinfo').dialog('close');
			 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
			 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
			 	    					                                 			        			        modal: true,
			 	    					                                 			        			        width: screenWidth,
			 	    					                                 			        			        height:'auto',
			 	    					                                 			        			        resizable:false,
			 	    					                                 			        			        position: { my: "center", at: "center", of: window },
			 	    					                                 			        			        open: function(){
			 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
			 	    					                                 			        			        	
			 	    					                                 			        			        },
			 	    					                                 			        			        buttons:[
			 	    					                                 			        			                 {
			 	    					                                 			        			                	id:'error',
			 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
			 	    					                                 			        	         			        click: function() {
			 	    					                                 			        	         			        	
			 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
			 	    					                                 			        	         			        }
			 	    					                                 			        			                 }
			 	    					                                 			        			                 
			 	    					                                 			        			                 ]
			 	    					                                 			        				})
		 	    					    		                                    				 }
		 	    					    		                  			     		 	 
		 	    					    		                                    				  
		 	    					    		                                    			  }) }
		 	    					    		                                   	 	    					    		          		
		 	    		          			        			        	 }
		 	    		          			        			         },
		 	    		          			        			         {
		 	    		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
		 	    		          			        			        	 click:function(){
		 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close');
		 	    		          			        			        	 }
		 	    		          			        			         }
		 	    		          			        			         
		 	    		          			        			         ]
		 	    		          			        		
		 	    		          			        			
		 	    		          			        		})
		 	    		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
		 	    		   	    		        	     $(".ui-dialog-title").css("color", "white");
		 	    		   	    		        	     $(".ui-dialog").css("position", "center");
		 	    		          			        	
		 	    		          			        }
     			     		     	                 },
     			     		     	      	    {   id:'delete',
      			     		          			        text: '<liferay-ui:message key="Deletethisaccount"/>',
      			     		          			        //open: function() { $(this).addClass('b') }, //will append a class called 'b' to the created 'OK' button.
      			     		          			        click: function() { 
      			     		          			        	
      			     		          			       
      			     		          			        	
      			     		          			        		$('#<%=namespace%>TPTabledialog').dialog('close');
      			     		          			        		$('#<%=namespace%>tpconfirm').dialog({
      			     		          			        			title:'<liferay-ui:message key="delete"/>',
      			     		          			        			modal: true,
      			     		          			        			buttons:[
      			     		          			        			         {
      			     		          			        			        	 text:'<liferay-ui:message key="confirm"/>',
      			     		          			        			        	 click:function(){
      			     		          			        			        	     	    		          		
      			     					    		                                     	Liferay.Service(
      			     					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
      			     					    		                                    			  {
      			     					    		                                    				accountId: accountid,
  			 	    					    		                                    			    accountName: accountname,
  			 	    					    		                                    			    accountDetailObject: data[18],
  			 	    					    		                                    			    identity:identity,
  			 	    					    		                                    			    pmtType:pmtType,
  			 	    					    		                                    			    activeFlag: 'N',
  			 	    					    		                                    			    expDate:'',
 			 	    					    		                                    			    pwd:'',
  			 	    					    		                                    			    fullName: fullName,
  			 	    					    		                                    			    firstName: '',
  			 	    					    		                                    			    lastName: '',
  			 	    					    		                                    			    middleName: '',
  			 	    					    		                                    			    email: email,
  			 	    					    		                                    			    addressLine1: addressLine1,
  			 	    					    		                                    			    addressLine2: addressLine2,
  			 	    					    		                                    			    addressLine3: addressLine3,
  			 	    					    		                                    			    city: city,
  			 	    					    		                                    			    state: state,
  			 	    					    		                                    			    zipCode: zipcode,
  			 	    					    		                                    			    countryCd: countryCd,
  			 	    					    		                                    			    phone: phone,
  			 	    					    		                                    			    identityNum: "",
  			 	    					    		                                    			    localeCd: "<%=langId %>"
      			     					    		                                    			  },function(response){
      			     					    		                                    				if(response.status.code==200){
      			     					    		                                    					dataSet.splice(window.index, 1);
 			     	     			     					    		                                      for(var i=0;i<accountinfo.length;i++){
 			     	         			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
 			     	         			 	    					    		                            		accountinfo.splice(i,1);
 			     	         			 	    					    		                            		break;
 			     	         			 	    					    		                            	  }
 			     	         			 	    					    		                              }
 			     	     			     					    		                                     	generateTPTable(dataSet);
 			     	     			     					    		                                     	$('#<%=namespace%>tpconfirm').dialog('close');
      			     					    		                                    				}else{
      			     					    		                                    					$('#<%=namespace%>tpconfirm').dialog('close');
  			 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
  			 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
  			 	    					                                 			        			        modal: true,
  			 	    					                                 			        			        width: screenWidth,
  			 	    					                                 			        			        height:'auto',
  			 	    					                                 			        			        resizable:false,
  			 	    					                                 			        			        position: { my: "center", at: "center", of: window },
  			 	    					                                 			        			        open: function(){
  			 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
  			 	    					                                 			        			        	
  			 	    					                                 			        			        },
  			 	    					                                 			        			        buttons:[
  			 	    					                                 			        			                 {
  			 	    					                                 			        			                	id:'error',
  			 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
  			 	    					                                 			        	         			        click: function() {
  			 	    					                                 			        	         			        	
  			 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
  			 	    					                                 			        	         			        }
  			 	    					                                 			        			                 }
  			 	    					                                 			        			                 
  			 	    					                                 			        			                 ]
  			 	    					                                 			        				})
      			     					    		                                    				}
      			     	     			     		          			        			        	   
      			     					    		                                    			  })
      			     					    		                
      			     		          			        			        	 }
      			     		          			        			         },
      			     		          			        			         {
      			     		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
      			     		          			        			        	 click:function(){
      			     		          			        			        		$('#<%=namespace%>tpconfirm').dialog('close');
      			     		          			        			        	 }
      			     		          			        			         }
      			     		          			        			         
      			     		          			        			         ]
      			     		          			        		
      			     		          			        			
      			     		          			        		})
      			     		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
      			     		   	    		        	     $(".ui-dialog-title").css("color", "white");
      			     		   	    		        	     $(".ui-dialog").css("position", "center");
      			     		          			        	
      			     		          			        }
      			     		          			    },
     			     		          			  ]
     			     			    	 
     			     			    	 
     			     			     });
     			                	     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
     			 	        	     $(".ui-dialog-title").css("color", "white");
     			 	        	     $(".ui-dialog").css("position", "center");
     			 	    			   
     			 	    			});
     			 	    	
     			 	    	}
     			 	    };
     			 	    
     			 	    
     function generateallTable(dataSet){
			 		    	/* for(var i=0;i<dataSet.length;i++){
			 		    	    dataSet[i][5]=<liferay-ui:message key="lm.remittance.paymentTypeThirdParty"/>
			 		    	}  */  
			 	    		/* $(".noneressend").css("display","none");
			 	    		$("#<%=namespace%>SEND").css("display","block"); */
			 	      	if ( $.fn.DataTable.isDataTable('#<%=namespace%>allTable') ) {
			 	    		  $('#<%=namespace%>allTable').DataTable().destroy();
			 	    		  
			 			    	//console.log(dataSet);
			 	    		}
			 	      	if(dataSet.length==0){
			 	    		 $("#<%=namespace%>all .noneres").show();
			 	    	  	 $("#<%=namespace%>allTable").hide();
			 	    	}else{
			 	    		 $("#<%=namespace%>all .noneres").hide();
			 	    	  	 $("#<%=namespace%>allTable").show();

			 	    		var table = $('#<%=namespace%>allTable').DataTable({
			 	    		/*     paging: false,
			 	    		    retrieve: true,
			 	 		       destory:true,
			 	 		       responsive:false, */
			 	 		      "responsive": true, 
			 	 		   "iDisplayLength": 25,
			                   //scrollCollapse: true,
			 	 		     "bSort": false,
			 	 		      "data":dataSet,
			 	 		     "oLanguage" : {
			 	                "sLengthMenu": "<liferay-ui:message key='LengthMenu'/>",
		 		                "sZeroRecords": "<liferay-ui:message key='ZeroRecords'/>",
		 		                "sInfo": "<liferay-ui:message key='Info'/>",
		 		                "sInfoEmpty": "<liferay-ui:message key='InfoEmpty'/>",
		 		                "sInfoFiltered": "<liferay-ui:message key='InfoFiltered'/>",
		 		                 "sSearch": "<liferay-ui:message key='Search'/>",
		 		                "oPaginate": {
		 		                "sFirst": "<liferay-ui:message key='First'/>",
		 		                "sPrevious": "<liferay-ui:message key='Previous'/>",
		 		                "sNext": "<liferay-ui:message key='Next'/>",
		 		                "sLast": "<liferay-ui:message key='Last'/>"
			 	                 }
			 	                 },
			 	 		      "columnDefs": [ {
			 	 	                "targets": -1,
			 	 	                "data": null,
			 	 	                "defaultContent": "<a class='deactive' style='cursor: pointer;'>"+'<liferay-ui:message key="View"/>'+"</a>"
			 	 	                //"defaultContent": "<div><a href='#' class='view'>"+'<liferay-ui:message key="deactive"/>'+"</a></div>"
			 	 	              }
			 	 	                   ,{
			 	 	                    "targets": [6],
			 	 	                    "visible": true,
			 	 	                    "searchable": false
			 	 	                }   
			 	 	                   ,{
			 	 	                    "targets": [2],
			 	 	                    "visible": false,
			 	 	                    "searchable": false
			 	 	                }       
			 	 	                  ,{
			 		 	                    "targets": [3,5,6,7,8,9,10,11,12,13,14,15,16,17],
			 		 	                    "visible": false,
			 		 	                    "searchable": false
			 		 	                } 
			 	 	               ]
			 	 		    	})
			 	    	$('#<%=namespace%>allTable tbody').off( 'click.rowClick' ).on( 'click.rowClick', '.deactive', function () 
			 	    			{ 

			                 var newindex=table.row($(this).closest('tr')).index();
			                 if(newindex==undefined){
			                	 newindex=table.row($(this).closest('tr').prev()).index();
			                 }
		                     var accountid = dataSet[newindex][1];
		     			     var accountname = dataSet[newindex][0];
		     			     var identity = dataSet[newindex][4];
		     			     var fullName = dataSet[newindex][6];
		     			     var email = dataSet[newindex][16];
		     			     var addressLine1 = dataSet[newindex][7];
		     			     var addressLine2 = dataSet[newindex][12];
		     			     var addressLine3 = dataSet[newindex][13];
		     			     var city = dataSet[newindex][10];
		     			     var state = dataSet[newindex][9];
		     			     var zipcode = dataSet[newindex][8];
		     			     var countryCd = dataSet[newindex][14];
		     			     var phone = dataSet[newindex][11];
		     			     var identityNum = dataSet[newindex][15];
		     			     var currencyCd = dataSet[newindex][2];
                           var pmtType = dataSet[newindex][5];
                           var detail = dataSet[newindex][18];
                           if(dataSet[newindex][18]!=""){
                               var detail = eval('('+dataSet[newindex][18].replace(/=/g,":")+')');
                              //var routing = dataSet[newindex][18].match(/routingNumber=\'([0-9]+)/);
                            
                              	var BankBranch = detail.bankBranch;
                              	var routing = detail.routingNumber;
                              
                              	
                              
                           }else{
                           	var BankBranch = "";
                           	var routing = "";
                           }
                           
                           
			                 window.index=newindex;
			                 
			                 var data=dataSet[window.index];
			                 
			                         if($(window).width()>600){
			                       	  var screenWidth = '500px';
			                         }else{
			                       	  var screenWidth = '300px';
			                         }
			                         $('#<%=namespace%>allTabledialog').dialog({
			     		    	        title: '<liferay-ui:message key="details"/>',
			     		     	        modal: true,
			     		     	        width: screenWidth,
			     		     	        height:'auto',
			     		     	        resizable:false,
			     		     	        position: { my: "center", at: "center", of: window },
			     		     	       open: function(){
			 	    		     	    	  $('#<%=namespace%>allTabledetail').html('<div class="sendtable"><table>\
			 	    		     	    			<tr><td>'+'<liferay-ui:message key="accountName"/>'+':</td><td>'+data[0]+'</td></tr>\
		 		    	         	               <tr><td>'+'<liferay-ui:message key="currencyCd"/>'+':</td><td>'+data[2]+'</td></tr>\
		 		    	  	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+':</td><td>'+data[6]+'</td></tr>\
		 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td>'+data[16]+'</td></tr>\
		 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+':</td><td>'+data[4]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td>'+data[7]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td>'+data[12]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td>'+data[13]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td>'+data[10]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td>'+data[9]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td>'+data[8]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="countryCd"/>'+':</td><td>'+data[14]+'</td></tr>\
		 		    	         	                   <tr><td>'+'<liferay-ui:message key="phone"/>'+':</td><td>'+data[11]+'</td></tr>\
		 		    	         	                   <tr class="cn" style="display:none"><td>'+'<liferay-ui:message key="bankBranch"/>'+':</td><td>'+BankBranch+'</td></tr>\
		 		    	         	                   <tr class="usa" style="display:none"><td>'+'<liferay-ui:message key="routing"/>'+':</td><td>'+routing+'</td></tr>\
			 	    	         	                   </table></div>');
			 	    		     	    	  if(currencyCd=="USD"&&data[5]=="BankAccount"){
			 	    		     	    		  $('.cn').hide();
			 	    		     	    		  $('.usa').show();
			 	    		     	    	  }
			 	    		     	    	  if(currencyCd=="CNY"){
			 	    		     	    		  $('.cn').show();
			 	    		     	    		  $('.usa').hide();
			 	    		     	    	  }
			 	    		     	    	 
			 	    		     	       },
			     		     	       buttons: [
			     		     	              
			     		          			
			     		          			  {
			     		          				 text:'<liferay-ui:message key="edit"/>',
		 	    		          			        click: function() { 
		 	    		    
	 	    		          			        		$('#<%=namespace%>allTabledialog').dialog('close');
	 	    		          			        		$('#<%=namespace%>editinfo').dialog({
	 	    		          			        			
	 	    		          			        			title:'<liferay-ui:message key="edit"/>',
	 	    		          			        		    modal: true,
	 	     			 	    		     	            width: screenWidth,
	 	     			 	    		     	            height:'auto',
	 	     			 	    		     	             resizable:false,
	 	     			 	    		     	             position: { my: "center", at: "center", of: window },
	 	    		          			      	            open: function(){
	     			 		    		     	    	        $('#<%=namespace%>editinfodetail').html('<div ><table>\
	     			 		    		     	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="fullname" value="'+data[6]+'"></td><td style="display:none" id="fullnamealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td><input type="text" id="email" value="'+data[16]+'"></td></tr>\
	        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="identity" value="'+data[4]+'"></td><td style="display:none" id="identityalert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td><input type="text" id="add1" value="'+data[7]+'"></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td><input type="text" id="add2" value="'+data[12]+'"></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td><input type="text" id="add3" value="'+data[13]+'"></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td><input type="text" id="city" value="'+data[10]+'"></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td><input type="text" id="state" value="'+data[9]+'"></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td><input type="text" id="zipcode" value="'+data[8]+'"></td></tr>\
	        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="phone"/>'+'<span class="phonemust" style="color:red;margin:5px;display:none">*</span>:</td><td><input type="text" id="phone" value="'+data[11]+'"></td><td style="display:none" id="phonealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr class="cn" style="display:none"><td>'+'<liferay-ui:message key="bankBranch"/>'+'<span class="cnmust" style="color:red;margin:5px;display:none">*</span>:</td><td><input type="text" id="bb" value="'+BankBranch+'"></td><td style="display:none" id="bbalert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr class="usa" style="display:none" ><td>'+'<liferay-ui:message key="routing"/>'+'<span class="usmust" style="color:red;margin:5px;display:none">*</span>:</td><td><input onkeydown="return (event.which >= 48 && event.which <= 57)|| event.which == 8" type="text" id="routnum" value="'+routing+'"></td><td style="display:none" id="routnumalert"><p style="color:red"><liferay-ui:message key="wrongformat"/></p><td></tr>\
	     			 		    	         	                   </table></div>');
	     			 		    		     	    	     if(currencyCd=="USD"&&data[5]=="BankAccount"){
	     					 	    		     	    		  $('.cn').hide();
	     					 	    		     	    		  $('.usa').show();
	     					 	    		     	    	  }
	     					 	    		     	    		  if(currencyCd=="CNY"){
	     					 	    		     	    		  $('.cn').show();
	     					 	    		     	    		  $('.usa').hide();
	     					 	    		     	    		$('.usmust').hide();
	     			 		    		     	    	    	$('.cnmust').show();
	     					 	    		     	    	  }
	     			 		    		     	    	     if(currencyCd=="USD"&&data[5]=="BankAccount"&&data[17]=="RecipientAccount"){
	     			 		    		     	    	    	$('.usmust').show();
	     			 		    		     	    	    	$('.cnmust').hide();
	     			 		    		     	    	     }
	     			 		    		     	    	     if(data[17]=="UserAccount"){
	     			 		    		     	    	    	 $('.phonemust').show();
	     			 		    		     	    	     }
	     			 		    		     	           },
	 	    		          			        			buttons:[
	 	    		          			        			         {
	 	    		          			        			        	 text:'<liferay-ui:message key="save"/>',
	 	    		          			        			        	 click:function(){
	 	    		          			        			        		 var flag = false;
	 	    		          			        			        	     	   var newfullname = $('#fullname').val();
	 	    		          			        			        	        if(newfullname==""){
	 	    		          			        			        	     		   $('#fullnamealert').css('display','block');
	 	    		          			        			        	     	   }else{
	 	    		          			        			        	     		$('#fullnamealert').css('display','none');
	 	    		          			        			        	     	   }
	 	    		          			        			        	     	   var newemail = $('#email').val();
	 	    		          			        			        	       
	 	    		          			        			        	           var newadd1 = $('#add1').val();
	 	    		          			        			        	       
	 	    		          			        			        	           var newidentity = $('#identity').val();
	 	    		          			        			        	        if(newidentity==""){
	 	    		          			        			        	     		   $('#identityalert').css('display','block');
	 	    		          			        			        	     	   }else{
	 	    		          			        			        	     		$('#identityalert').css('display','none');
	 	    		          			        			        	     	   }
	 	    		          			        			        	        if(currencyCd=="USD"&&data[5]=="BankAccount"){
	 	    		          			        			        	        	if(!($('#routnum').val().match(/^\d+$/))){
	 	    		          			        			        	        		$('#routnumalert').css('display','block');
	 	    		          			        			        	        		
	 	    		          			        			        	        	}else{
	 	    		          			        			        	        		$('#routnumalert').css('display','none');
	 	    		          			        			        	        	}
	 	    		          			        			        	        }
	 	    		          			        			        	           var newadd2 = $('#add2').val();
	 	    		          			        			        	           var newadd3 = $('#add3').val();
	 	    		          			        			        	           var newcity = $('#city').val();
	 	    		          			        			        	        
	 	    		          			        			        	           var newstate = $('#state').val();
	 	    		          			        			        	        
	 	    		          			        			                       var newzipcode = $('#zipcode').val();
	 	    		          			        			                    
	 	    		          			        			                       var newphone = $('#phone').val();
	 	    		                                                               if(data[17]=="UserAccount"){
	 	    		                                                            	  if(newphone==""){
	 	    		          			        			                    		   $('#phonealert').show();
	 	    		          			        			                    	   }else{
	 	    		          			        			                    		$('#phonealert').hide();
	 	    		          			        			                    	   }
	 	    		                                                               }
	 	    		          			        			                    	   
	 	    		          			        			               
	 	    		          			        			                      var newidentitynum = $('#identitynum').val(); 
	 	    		          			        			                    
	 	    		          			        			                    var oldbankbranch = "bankBranch='"+BankBranch+"'";
	    		          			        			                         var newbankbranch = "bankBranch='"+ $('#bb').val()+"'";
	    		          			        			                         var oldrouting = "routingNumber='"+routing+"'";
	    		          			        			                         var newrouting = "routingNumber='"+ $('#routnum').val()+"'";
	    		          			        			                      
	    		          			        			                       if(currencyCd=="CNY"){
	    		          			        			                    	 if(data[18]!=""){
	 	    		          			        			                    	var newdetail = data[18].replace(oldbankbranch,newbankbranch);
	 	    		          			        			                       }else{
	 	    		          			        			                    	var newdetail = "{"+newbankbranch+"}";
	 	    		          			        			                       }
	    		          			        			                    	  if($('#bb').val()==""){
		    		          			        			        	     		   $('#bbalert').css('display','block');
		    		          			        			        	     	   }else{
		    		          			        			        	     		$('#bbalert').css('display','none');
		    		          			        			        	     	   }
	    		          			        			                       }else if(currencyCd=="USD"){
	    		          			        			                    	 if(data[18]!=""){
		 	    		          			        			                    	var newdetail = data[18].replace(oldrouting,newrouting);
		 	    		          			        			                       }else{
		 	    		          			        			                    	var newdetail = "{"+newrouting+"}";
		 	    		          			        			                       }
	    		          			        			                       }
	    		          			        			                  
	    		          			        			                       if(currencyCd=="CNY"&&data[17]=="UserAccount"){
	    		          			        			                    	 if(newfullname!=""&&newidentity!=""&&newphone!=""&&$('#bb').val()!=""){
		    		          			        			                    	   flag = true;
		    		          			        			                       }
	    		          			        			                       }
	    		          			        			                       if(currencyCd=="CNY"&&data[17]=="RecipientAccount"){
	    		          			        			                    	 if(newfullname!=""&&newidentity!=""&&$('#bb').val()!=""){
		    		          			        			                    	   flag = true;
		    		          			        			                       }
	    		          			        			                       }
	    		          			        			                       if(currencyCd=="USD"&&data[5]=="BankAccount"&&data[17]=="UserAccount"){
	    		          			        			                    	 if(newfullname!=""&&newidentity!=""&&($('#routnum').val().match(/^\d+$/))&&newphone!=""){
		    		          			        			                    	   flag = true;
		    		          			        			                       }
	    		          			        			                       }
	    		          			        			                     if(currencyCd=="USD"&&data[5]=="BankAccount"&&data[17]=="RecipientAccount"){
	    		          			        			                    	 if(newfullname!=""&&newidentity!=""&&($('#routnum').val().match(/^\d+$/))){
		    		          			        			                    	   flag = true;
		    		          			        			                       }
	    		          			        			                       }
	    		          			        			                      if(currencyCd=="USD"&&data[5]=="ThirdParty"&&data[17]=="UserAccount"){
	    		          			        			                    	 if(newfullname!=""&&newidentity!=""&&newphone!=""){
		    		          			        			                    	   flag = true;
		    		          			        			                       }
	    		          			        			                       }
	    		          			        			                    if(currencyCd=="USD"&&data[5]=="ThirdParty"&&data[17]=="RecipientAccount"){
	    		          			        			                    	 if(newfullname!=""&&newidentity!=""){
		    		          			        			                    	   flag = true;
		    		          			        			                       }
	    		          			        			                       }
	    		          			        			                     
	 	    		          			        			                    if(flag){
	 	    					    		                                      	Liferay.Service(
	 	    					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
	 	    					    		                                    			  {
	 	    					    		                                    				accountId: accountid,
	 	    					    		                                    			    accountName: accountname,
	 	    					    		                                    			    accountDetailObject: newdetail,
	 	    					    		                                    			    identity:newidentity,
	 	    					    		                                    			    pmtType:pmtType,
	 	    					    		                                    			    activeFlag: 'Y',
	 	    					    		                                    			    expDate:'',
	 	    					    		                                    			    pwd:'',
	 	    					    		                                    			    fullName: newfullname,
	 	    					    		                                    			    firstName: '',
	 	    					    		                                    			    lastName: '',
	 	    					    		                                    			    middleName: '',
	 	    					    		                                    			    email: newemail,
	 	    					    		                                    			    addressLine1: newadd1,
	 	    					    		                                    			    addressLine2: newadd2,
	 	    					    		                                    			    addressLine3: newadd3,
	 	    					    		                                    			    city: newcity,
	 	    					    		                                    			    state: newstate,
	 	    					    		                                    			    zipCode: newzipcode,
	 	    					    		                                    			    countryCd: countryCd,
	 	    					    		                                    			    phone: newphone,
	 	    					    		                                    			    identityNum: "",
	 	    					    		                                    			    localeCd: "<%=langId %>"
	 	    					    		                                    			  },function(response){
	 	    					    		                                    				  //console.log(response);
	 	    					    		                                    				 //location.reload(true);
	 	    					    		                                    				 if(response.status.code==200){
	 	    					    		                                    				    dataSet[newindex][4] = newidentity;
			 	    					    		                  			     			     dataSet[newindex][6] = newfullname;
			 	    					    		                  			     			     dataSet[newindex][16] = newemail;
			 	    					    		                  			     			     dataSet[newindex][7] = newadd1;
			 	    					    		                  			     			     dataSet[newindex][12] = newadd2;
			 	    					    		                  			     			     dataSet[newindex][13] = newadd3;
			 	    					    		                  			     			     dataSet[newindex][10] = newcity;
			 	    					    		                  			     			     dataSet[newindex][9] = newstate;
			 	    					    		                  			     			     dataSet[newindex][8] = newzipcode;
			 	    					    		                  			     			     dataSet[newindex][11] = newphone;
			 	    					    		                  			     			     dataSet[newindex][18] = newdetail;
			 	      			 	    					    		                              for(var i=0;i<accountinfo.length;i++){
			 	      			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
			 	      			 	    					    		                            	   accountinfo[i].identity = newidentity;
			 	      			 	    					    		                            	   accountinfo[i].fullName = newfullname;
			 	      			 	    					    		                            	   accountinfo[i].email = newemail;
			 	      			 	    					    		                            	   accountinfo[i].addressLine1 = newadd1;
			 	      			 	    					    		                            	   accountinfo[i].addressLine2 = newadd2;
			 	      			 	    					    		                            	   accountinfo[i].addressLine3 = newadd3;
			 	      			 	    					    		                            	   accountinfo[i].city = newcity;
			 	      			 	    					    		                                   accountinfo[i].state = newstate;
			 	      			 	    					    		                                   accountinfo[i].zipCode = newzipcode;
			 	      			 	    					    		                                   accountinfo[i].phone = newphone;  
			 	      			 	    					    		                                   accountinfo[i].detailJSON = newdetail;
			 	      			 	    					    		                                   break;
			 	      			 	    					    		                            	  }
			 	      			 	    					    		                              }
			 	      			 	    					    		                               generateallTable(dataSet);
			 	      			 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close'); 
	 	    					    		                                    				 }else{
	 	    					    		                                    					$('#<%=namespace%>editinfo').dialog('close');
		 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
		 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
		 	    					                                 			        			        modal: true,
		 	    					                                 			        			        width: screenWidth,
		 	    					                                 			        			        height:'auto',
		 	    					                                 			        			        resizable:false,
		 	    					                                 			        			        position: { my: "center", at: "center", of: window },
		 	    					                                 			        			        open: function(){
		 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
		 	    					                                 			        			        	
		 	    					                                 			        			        },
		 	    					                                 			        			        buttons:[
		 	    					                                 			        			                 {
		 	    					                                 			        			                	id:'error',
		 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
		 	    					                                 			        	         			        click: function() {
		 	    					                                 			        	         			        	
		 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
		 	    					                                 			        	         			        }
		 	    					                                 			        			                 }
		 	    					                                 			        			                 
		 	    					                                 			        			                 ]
		 	    					                                 			        				})
	 	    					    		                                    				 }
	 	    					    		                  			     		 	 
	 	    					    		                                    				  
	 	    					    		                                    			  }) } 
	 	    					    		                                   	 	    					    		          		
	 	    		          			        			        	 }
	 	    		          			        			         },
	 	    		          			        			         {
	 	    		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
	 	    		          			        			        	 click:function(){
	 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close');
	 	    		          			        			        	 }
	 	    		          			        			         }
	 	    		          			        			         
	 	    		          			        			         ]
	 	    		          			        		
	 	    		          			        			
	 	    		          			        		})
	 	    		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
	 	    		   	    		        	     $(".ui-dialog-title").css("color", "white");
	 	    		   	    		        	     $(".ui-dialog").css("position", "center");
	 	    		          			        	
	 	    		          			        }
			     		     	                 },
			     		     	               {   id:'delete',
				     		          			        text: '<liferay-ui:message key="Deletethisaccount"/>',
				     		          			        //open: function() { $(this).addClass('b') }, //will append a class called 'b' to the created 'OK' button.
				     		          			        click: function() { 
				     		          			        	
				     		          			       
				     		          			        	
				     		          			        		$('#<%=namespace%>allTabledialog').dialog('close');
				     		          			        		$('#<%=namespace%>allconfirm').dialog({
				     		          			        			title:'<liferay-ui:message key="delete"/>',
				     		          			        			modal: true,
				     		          			        			buttons:[
				     		          			        			         {
				     		          			        			        	 text:'<liferay-ui:message key="confirm"/>',
				     		          			        			        	 click:function(){
				     		          			        			        	     	    		          		
				     					    		                                     	Liferay.Service(
				     					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
				     					    		                                    			  {
				     					    		                                    				accountId: accountid,
			 	    					    		                                    			    accountName: accountname,
			 	    					    		                                    			    accountDetailObject: data[18],
			 	    					    		                                    			    identity:identity,
			 	    					    		                                    			    pmtType:pmtType,
			 	    					    		                                    			    activeFlag: 'N',
			 	    					    		                                    			    expDate:'',
			 	    					    		                                    			    pwd:'',
			 	    					    		                                    			    fullName: fullName,
			 	    					    		                                    			    firstName: '',
			 	    					    		                                    			    lastName: '',
			 	    					    		                                    			    middleName: '',
			 	    					    		                                    			    email: email,
			 	    					    		                                    			    addressLine1: addressLine1,
			 	    					    		                                    			    addressLine2: addressLine2,
			 	    					    		                                    			    addressLine3: addressLine3,
			 	    					    		                                    			    city: city,
			 	    					    		                                    			    state: state,
			 	    					    		                                    			    zipCode: zipcode,
			 	    					    		                                    			    countryCd: countryCd,
			 	    					    		                                    			    phone: phone,
			 	    					    		                                    			    identityNum: "",
			 	    					    		                                    			    localeCd: "<%=langId %>"
				     					    		                                    			  },function(response){
				     					    		                                    				if(response.status.code==200){
				     					    		                                    					dataSet.splice(window.index, 1);
			     	     			     					    		                                      for(var i=0;i<accountinfo.length;i++){
			     	         			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
			     	         			 	    					    		                            		accountinfo.splice(i,1);
			     	         			 	    					    		                            		break;
			     	         			 	    					    		                            	  }
			     	         			 	    					    		                              }
			     	     			     					    		                                     	generateallTable(dataSet);
			     	     			     					    		                                     	$('#<%=namespace%>allconfirm').dialog('close');
				     					    		                                    				}else{
				     					    		                                    					$('#<%=namespace%>allconfirm').dialog('close');
			 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
			 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
			 	    					                                 			        			        modal: true,
			 	    					                                 			        			        width: screenWidth,
			 	    					                                 			        			        height:'auto',
			 	    					                                 			        			        resizable:false,
			 	    					                                 			        			        position: { my: "center", at: "center", of: window },
			 	    					                                 			        			        open: function(){
			 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
			 	    					                                 			        			        	
			 	    					                                 			        			        },
			 	    					                                 			        			        buttons:[
			 	    					                                 			        			                 {
			 	    					                                 			        			                	id:'error',
			 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
			 	    					                                 			        	         			        click: function() {
			 	    					                                 			        	         			        	
			 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
			 	    					                                 			        	         			        }
			 	    					                                 			        			                 }
			 	    					                                 			        			                 
			 	    					                                 			        			                 ]
			 	    					                                 			        				})
				     					    		                                    				}
				     	     			     		          			        			        	   
				     					    		                                    			  })
				     					    		                
				     		          			        			        	 }
				     		          			        			         },
				     		          			        			         {
				     		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
				     		          			        			        	 click:function(){
				     		          			        			        		$('#<%=namespace%>allconfirm').dialog('close');
				     		          			        			        	 }
				     		          			        			         }
				     		          			        			         
				     		          			        			         ]
				     		          			        		
				     		          			        			
				     		          			        		})
				     		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
				     		   	    		        	     $(".ui-dialog-title").css("color", "white");
				     		   	    		        	     $(".ui-dialog").css("position", "center");
				     		          			        	
				     		          			        }
				     		          			    },
			     		          			  ]
			     			    	 
			     			    	 
			     			     });
			                	     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
			 	        	     $(".ui-dialog-title").css("color", "white");
			 	        	     $(".ui-dialog").css("position", "center");
			 	    			   
			 	    			});
			 	    	
			 	    	}
			 	    };
			 	    
			 	    
  function generateDCTable(dataSet){
	  //console.log('createdc');
               
     			       	if ( $.fn.DataTable.isDataTable('#<%=namespace%>DCTable') ) {
     			     		  $('#<%=namespace%>DCTable').DataTable().destroy();
     			     		  
     			 		    	//console.log(dataSet);
     			     		}
     			       	if(dataSet.length==0){
     			    		 $("#<%=namespace%>DC .noneres").show();
     			    	  	 $("#<%=namespace%>DCTable").hide();
     			    	}else{
     			    		 $("#<%=namespace%>DC .noneres").hide();
     			    	  	 $("#<%=namespace%>DCTable").show();
     			     		
     			    	  	 var table = $('#<%=namespace%>DCTable').DataTable({
     			     		/*     paging: false,
     			     		    retrieve: true,
     			  		       destory:true,
     			  		       responsive:false, */
     			  		      "responsive": true, 
     			  		   "iDisplayLength": 25,
     			                   //scrollCollapse: true,
     			  		     "bSort": false,
     			  		      "data":dataSet,
     			  		     "oLanguage" : {
     			                "sLengthMenu": "<liferay-ui:message key='LengthMenu'/>",
			 		                "sZeroRecords": "<liferay-ui:message key='ZeroRecords'/>",
			 		                "sInfo": "<liferay-ui:message key='Info'/>",
			 		                "sInfoEmpty": "<liferay-ui:message key='InfoEmpty'/>",
			 		                "sInfoFiltered": "<liferay-ui:message key='InfoFiltered'/>",
			 		                 "sSearch": "<liferay-ui:message key='Search'/>",
			 		                "oPaginate": {
			 		                "sFirst": "<liferay-ui:message key='First'/>",
			 		                "sPrevious": "<liferay-ui:message key='Previous'/>",
			 		                "sNext": "<liferay-ui:message key='Next'/>",
			 		                "sLast": "<liferay-ui:message key='Last'/>"
     			                  }
     			                  },
     			  		      "columnDefs": [ {
     			  	                "targets": -1,
     			  	                "data": null,
     			  	                "defaultContent": "<a class='deactive' style='cursor: pointer;'>"+'<liferay-ui:message key="View"/>'+"</a>"
     			  	                //"defaultContent": "<div><a href='#' class='view'>"+'<liferay-ui:message key="deactive"/>'+"</a></div>"
     			  	              }
     			  	                   ,{
     			  	                    "targets": [6],
     			  	                    "visible": true,
     			  	                    "searchable": false
     			  	                }   
     			  	                   ,{
     			  	                    "targets": [2],
     			  	                    "visible": false,
     			  	                    "searchable": false
     			  	                }       
     			  	                  ,{
     			 	 	                    "targets": [3,5,6,7,8,9,10,11,12,13,14,15,16,17,18],
     			 	 	                    "visible": false,
     			 	 	                    "searchable": false
     			 	 	                } 
     			  	               ]
     			  		    	})
     			     	$('#<%=namespace%>DCTable tbody').off( 'click.rowClick' ).on( 'click.rowClick', '.deactive', function () 
     			     			{ 

     			             var newindex=table.row($(this).closest('tr')).index();
     			             if(newindex==undefined){
     			            	 newindex=table.row($(this).closest('tr').prev()).index();
     			             }
     			             var accountid = dataSet[newindex][1];
		     			     var accountname = dataSet[newindex][0];
		     			     var identity = dataSet[newindex][4];
		     			     var fullName = dataSet[newindex][6];
		     			     var email = dataSet[newindex][16];
		     			     var addressLine1 = dataSet[newindex][7];
		     			     var addressLine2 = dataSet[newindex][12];
		     			     var addressLine3 = dataSet[newindex][13];
		     			     var city = dataSet[newindex][10];
		     			     var state = dataSet[newindex][9];
		     			     var zipcode = dataSet[newindex][8];
		     			     var countryCd = dataSet[newindex][14];
		     			     var phone = dataSet[newindex][11];
		     			     var identityNum = dataSet[newindex][15];
                             var pmtType = dataSet[newindex][5];
                            if(dataSet[newindex][18]!=""){
                                var detail = eval('('+dataSet[newindex][18].replace(/=/g,":")+')');
                               var routing = dataSet[newindex][18].match(/routingNumber=\'([0-9]+)/);
                             
                               	var BankBranch = detail.bankBranch;
                               
                               	
                               
                            }else{
                            	var BankBranch = "";
                            }
                            
                            
                  
                             //console.log(BankBranch);
     			             window.index=newindex;
     			             
     			             var data=dataSet[window.index];
     			             
     			                     if($(window).width()>600){
     			                   	  var screenWidth = '500px';
     			                     }else{
     			                   	  var screenWidth = '300px';
     			                     }
     			                     $('#<%=namespace%>DCTabledialog').dialog({
     			 		    	        title: '<liferay-ui:message key="details"/>',
     			 		     	        modal: true,
     			 		     	        width: screenWidth,
     			 		     	        height:'auto',
     			 		     	        resizable:false,
     			 		     	        position: { my: "center", at: "center", of: window },
     			 		     	       open: function(){
     			     		     	    	  $('#<%=namespace%>DCTabledetail').html('<div class="sendtable"><table>\
     			     		     	    			<tr><td>'+'<liferay-ui:message key="accountName"/>'+':</td><td>'+data[0]+'</td></tr>\
			 		    	         	               <tr><td>'+'<liferay-ui:message key="currencyCd"/>'+':</td><td>'+data[2]+'</td></tr>\
			 		    	  	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+':</td><td>'+data[6]+'</td></tr>\
		 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td>'+data[16]+'</td></tr>\
		 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+':</td><td>'+data[4]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td>'+data[7]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td>'+data[12]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td>'+data[13]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td>'+data[10]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td>'+data[9]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td>'+data[8]+'</td></tr>\
		 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="countryCd"/>'+':</td><td>'+data[14]+'</td></tr>\
		 		    	         	                   <tr><td>'+'<liferay-ui:message key="phone"/>'+':</td><td>'+data[11]+'</td></tr>\
                                                       <tr><td>'+'<liferay-ui:message key="bankBranch"/>'+':</td><td>'+BankBranch+'</td></tr>\
     			 	         	                   </table></div>')
     			 	         	                 
     			     		     	       },
     			 		     	       buttons: [
     			 		     	              
     			 		          		
     			 		          			  {
     			 		          				 text:'<liferay-ui:message key="edit"/>',
		 	    		          			        click: function() { 
		 	    		          			        	
	 	    		          			        		$('#<%=namespace%>DCTabledialog').dialog('close');
	 	    		          			        		$('#<%=namespace%>editinfo').dialog({
	 	    		          			        			
	 	    		          			        			title:'<liferay-ui:message key="edit"/>',
	 	    		          			        		    modal: true,
	 	     			 	    		     	            width: screenWidth,
	 	     			 	    		     	            height:'auto',
	 	     			 	    		     	             resizable:false,
	 	     			 	    		     	             position: { my: "center", at: "center", of: window },
	 	    		          			      	            open: function(){
	     			 		    		     	    	        $('#<%=namespace%>editinfodetail').html('<div ><table>\
	     			 		    		     	  	                   <tr><td>'+'<liferay-ui:message key="fullname"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="fullname" value="'+data[6]+'"></td><td style="display:none" id="fullnamealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="email"/>'+':</td><td><input type="text" id="email" value="'+data[16]+'"></td></td></tr>\
	        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="identity"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="identity" value="'+data[4]+'"></td><td style="display:none" id="identityalert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine1"/>'+':</td><td><input type="text" id="add1" value="'+data[7]+'"></td><td style="display:none" id="add1alert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine2"/>'+':</td><td><input type="text" id="add2" value="'+data[12]+'"></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="addressLine3"/>'+':</td><td><input type="text" id="add3" value="'+data[13]+'"></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="city"/>'+':</td><td><input type="text" id="city" value="'+data[10]+'"></td><td style="display:none" id="cityalert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="state"/>'+':</td><td><input type="text" id="state" value="'+data[9]+'"></td><td style="display:none" id="statealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="zipCode"/>'+':</td><td><input type="text" id="zipcode" value="'+data[8]+'"></td><td style="display:none" id="zipcodealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr style="display:none"><td>'+'<liferay-ui:message key="phone"/>'+'<span class="UserAccount" style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="phone" value="'+data[11]+'"></td><td style="display:none" id="phonealert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	        			 		    	         	                   <tr><td>'+'<liferay-ui:message key="bankBranch"/>'+'<span style="color:red;margin:5px;">*</span>:</td><td><input type="text" id="bb" value="'+BankBranch+'"></td><td style="display:none" id="bbalert"><p style="color:red"><liferay-ui:message key="can'tbeempty"/></p></td></tr>\
	     			 		    	         	                   </table></div>')
	     			 		    	         	                   //console.log();
	     			 		    	         	                if(active!="UserAccount"){
	     	     			 	         	                	   $(".UserAccount").css('display','none');
	     	     			 	         	                   }
	     			 		    		     	           },
	 	    		          			        			buttons:[
	 	    		          			        			         {
	 	    		          			        			        	 text:'<liferay-ui:message key="save"/>',
	 	    		          			        			        	 click:function(){
	 	    		          			        			        		//console.log(active);
	 	    		          			        			        		       var flag = false;
	 	    		          			        			        	     	   var newfullname = $('#fullname').val();
	 	    		          			        			        	     	  if(newfullname==""){
	 	    		          			        			        	     		   $('#fullnamealert').css('display','block');
	 	    		          			        			        	     	   }else{
	 	    		          			        			        	     		$('#fullnamealert').css('display','none');
	 	    		          			        			        	     	   }
	 	    		          			        			        	     	   var newemail = $('#email').val();
	 	    		          			        			        	     	
	 	    		          			        			        	           var newadd1 = $('#add1').val();
	 	    		          			        			        	       
	 	    		          			        			        	           var newidentity = $('#identity').val();
	 	    		          			        			        	        if(newidentity==""){
	 	    		          			        			        	     		   $('#identityalert').css('display','block');
	 	    		          			        			        	     	   }else{
	 	    		          			        			        	     		$('#identityalert').css('display','none');
	 	    		          			        			        	     	   }
	 	    		          			        			        	           var newadd2 = $('#add2').val();
	 	    		          			        			        	           var newadd3 = $('#add3').val();
	 	    		          			        			        	           var newcity = $('#city').val();
	 	    		          			        			        	     
	 	    		          			        			        	           var newstate = $('#state').val();
	 	    		          			        			        	    
	 	    		          			        			                       var newzipcode = $('#zipcode').val();
	 	    		          			        			               
	 	    		          			        			                       var newphone = $('#phone').val();
	 	    		          			        			                       if(active=="UserAccount"){
	 	    		          			        			                    	   if(newphone==""){
		 	    		          			        			        	     		   $('#phonealert').css('display','block');
		 	    		          			        			        	     	   }else{
		 	    		          			        			        	     		$('#phonealert').css('display','none');
		 	    		          			        			        	     	   }
	 	    		          			        			                       }
	 	    		          			        			                 
	 	    		          			        			                       var newidentitynum = $('#identitynum').val();
	 	    		          			        			                       var oldbankbranch = "bankBranch='"+BankBranch+"'";
	 	    		          			        			                       var newbankbranch = "bankBranch='"+ $('#bb').val()+"'";
	 	    		          			        			                    if($('#bb').val()==""){
	 	    		          			        			        	     		   $('#bbalert').css('display','block');
	 	    		          			        			        	     	   }else{
	 	    		          			        			        	     		$('#bbalert').css('display','none');
	 	    		          			        			        	     	   }
	 	    		          			        			                       if(data[18]!=""){
	 	    		          			        			                    	var newdetail = data[18].replace(oldbankbranch,newbankbranch);
	 	    		          			        			                       }else{
	 	    		          			        			                    	var newdetail = "{"+newbankbranch+"}";
	 	    		          			        			                       }
	 	    		          			        			                    if(active=="UserAccount"){
	 	    		          			        			                    	if(newfullname!=""&&newidentity!=""&&newphone!=""&&$('#bb').val()!=""){
	 	    		          			        			                    	   flag = true;
	 	    		          			        			                    	}
	 	    		          			        			                       
	 	    		          			        			                    	}else{
	 	    		          			        			                    		//&&newadd1!=""&&newzipcode!=""&&newstate!=""&&newcity!=""
	 	    		          			        			                    	  if(newfullname!=""&&newidentity!=""&&$('#bb').val()!=""){
		 	    		          			        			                    	   flag = true;
		 	    		          			        			                       }
	 	    		          			        			                    	}
	 	    		          			        			                     
	 	    		          			        			                       if(flag){
	 	    					    		                                      	Liferay.Service(
	 	    					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
	 	    					    		                                    			  {
	 	    					    		                                    				accountId: accountid,
	 	    					    		                                    			    accountName: accountname,
	 	    					    		                                    			    accountDetailObject: newdetail,
	 	    					    		                                    			    identity:newidentity,
	 	    					    		                                    			    pmtType:pmtType,
	 	    					    		                                    			    activeFlag: 'Y',
	 	    					    		                                    			    expDate:'',
	 	    					    		                                    			    pwd:'',
	 	    					    		                                    			    fullName: newfullname,
	 	    					    		                                    			    firstName: '',
	 	    					    		                                    			    lastName: '',
	 	    					    		                                    			    middleName: '',
	 	    					    		                                    			    email: newemail,
	 	    					    		                                    			    addressLine1: newadd1,
	 	    					    		                                    			    addressLine2: newadd2,
	 	    					    		                                    			    addressLine3: newadd3,
	 	    					    		                                    			    city: newcity,
	 	    					    		                                    			    state: newstate,
	 	    					    		                                    			    zipCode: newzipcode,
	 	    					    		                                    			    countryCd: countryCd,
	 	    					    		                                    			    phone: newphone,
	 	    					    		                                    			    identityNum: "",
	 	    					    		                                    			    localeCd: "<%=langId %>"
	 	    					    		                                    			  },function(response){
	 	    					    		                                    				 if(response.status.code==200){
	 	    					    		                                    					dataSet[newindex][4] = newidentity;
	 		 	    					    		                  			     			     dataSet[newindex][6] = newfullname;
	 		 	    					    		                  			     			     dataSet[newindex][16] = newemail;
	 		 	    					    		                  			     			     dataSet[newindex][7] = newadd1;
	 		 	    					    		                  			     			     dataSet[newindex][12] = newadd2;
	 		 	    					    		                  			     			     dataSet[newindex][13] = newadd3;
	 		 	    					    		                  			     			     dataSet[newindex][10] = newcity;
	 		 	    					    		                  			     			     dataSet[newindex][9] = newstate;
	 		 	    					    		                  			     			     dataSet[newindex][8] = newzipcode;
	 		 	    					    		                  			     			     dataSet[newindex][11] = newphone;
	 		 	    					    		                  			     			    dataSet[newindex][18] = newdetail;
	 		 	      			 	    					    		                              for(var i=0;i<accountinfo.length;i++){
	 		 	      			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
	 		 	      			 	    					    		                            	   accountinfo[i].identity = newidentity;
	 		 	      			 	    					    		                            	   accountinfo[i].fullName = newfullname;
	 		 	      			 	    					    		                            	   accountinfo[i].email = newemail;
	 		 	      			 	    					    		                            	   accountinfo[i].addressLine1 = newadd1;
	 		 	      			 	    					    		                            	   accountinfo[i].addressLine2 = newadd2;
	 		 	      			 	    					    		                            	   accountinfo[i].addressLine3 = newadd3;
	 		 	      			 	    					    		                            	   accountinfo[i].city = newcity;
	 		 	      			 	    					    		                                   accountinfo[i].state = newstate;
	 		 	      			 	    					    		                                   accountinfo[i].zipCode = newzipcode;
	 		 	      			 	    					    		                                   accountinfo[i].phone = newphone;
	 		 	      			 	    					    		                                   accountinfo[i].detailJSON = newdetail;
	 		 	      			 	    					    		                                   break; 
	 		 	      			 	    					    		                            	  }
	 		 	      			 	    					    		                              }
	 		 	      			 	    					    		                               generateDCTable(dataSet);
	 		 	      			 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close'); 
	 		 	    					    		                                    				   
	 	    					    		                                    				 }else{
	 	    					    		                                    					$('#<%=namespace%>editinfo').dialog('close');
	 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
	 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
	 	    					                                 			        			        modal: true,
	 	    					                                 			        			        width: screenWidth,
	 	    					                                 			        			        height:'auto',
	 	    					                                 			        			        resizable:false,
	 	    					                                 			        			        position: { my: "center", at: "center", of: window },
	 	    					                                 			        			        open: function(){
	 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
	 	    					                                 			        			        	
	 	    					                                 			        			        },
	 	    					                                 			        			        buttons:[
	 	    					                                 			        			                 {
	 	    					                                 			        			                	id:'error',
	 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
	 	    					                                 			        	         			        click: function() {
	 	    					                                 			        	         			        	
	 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
	 	    					                                 			        	         			        }
	 	    					                                 			        			                 }
	 	    					                                 			        			                 
	 	    					                                 			        			                 ]
	 	    					                                 			        				})
	 	    					    		                                    				 }
	 	    					    		                  			     			     
	 	    					    		                                    			  }) }
	 	    					    		                                   	 	    					    		          		
	 	    		          			        			        	 }
	 	    		          			        			         },
	 	    		          			        			         {
	 	    		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
	 	    		          			        			        	 click:function(){
	 	    		          			        			        		$('#<%=namespace%>editinfo').dialog('close');
	 	    		          			        			        	 }
	 	    		          			        			         }
	 	    		          			        			         
	 	    		          			        			         ]
	 	    		          			        		
	 	    		          			        			
	 	    		          			        		})
	 	    		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
	 	    		   	    		        	     $(".ui-dialog-title").css("color", "white");
	 	    		   	    		        	     $(".ui-dialog").css("position", "center");
	 	    		          			        	
	 	    		          			        }
     			 		     	                 },
     			 		     	      	    {   id:'delete',
      			 		          			        text: '<liferay-ui:message key="Deletethisaccount"/>',
      			 		          			        //open: function() { $(this).addClass('b') }, //will append a class called 'b' to the created 'OK' button.
      			 		          			        click: function() { 
      			 		          			       
      			 		          			        		$('#<%=namespace%>DCTabledialog').dialog('close');
      			 		          			        		$('#<%=namespace%>dcconfirm').dialog({
      			 		          			        			title:'<liferay-ui:message key="delete"/>',
      			 		          			        			modal: true,
      			 		          			        			buttons:[
      			 		          			        			         {
      			 		          			        			        	 text:'<liferay-ui:message key="confirm"/>',
      			 		          			        			        	 click:function(){
      			 		          			        			        	     	    		          		
      			 					    		                                     	 Liferay.Service(
      			 					    		                                    			'/LmAccountServices-portlet.account/update-account-and-holder',
      			 					    		                                    			  {
      			 					    		                                    				    accountId: accountid,
 			 	    					    		                                    			    accountName: accountname,
 			 	    					    		                                    			    accountDetailObject: data[18],
 			 	    					    		                                    			    identity:identity,
 			 	    					    		                                    			    pmtType:pmtType,
 			 	    					    		                                    			    activeFlag: 'N',
 			 	    					    		                                    			    expDate:'',
 		 	    					    		                                    			        pwd:'',
 			 	    					    		                                    			    fullName: fullName,
 			 	    					    		                                    			    firstName: '',
 			 	    					    		                                    			    lastName: '',
 			 	    					    		                                    			    middleName: '',
 			 	    					    		                                    			    email: email,
 			 	    					    		                                    			    addressLine1: addressLine1,
 			 	    					    		                                    			    addressLine2: addressLine2,
 			 	    					    		                                    			    addressLine3: addressLine3,
 			 	    					    		                                    			    city: city,
 			 	    					    		                                    			    state: state,
 			 	    					    		                                    			    zipCode: zipcode,
 			 	    					    		                                    			    countryCd: countryCd,
 			 	    					    		                                    			    phone: phone,
 			 	    					    		                                    			    identityNum: "",
 			 	    					    		                                    			    localeCd: "<%=langId %>"
      			 					    		                                    			  },function(response){
      			 					    		                                    				if(response.status.code==200){
      			 					    		                                    					dataSet.splice(window.index, 1);
 			 		     			 					    		                                      for(var i=0;i<accountinfo.length;i++){
 			 		     			 	    					    		                            	  if(accountinfo[i].accountId==accountid){
 			 		     			 	    					    		                            		accountinfo.splice(i,1);
 			 		     			 	    					    		                            		break;
 			 		     			 	    					    		                            	  }
 			 		     			 	    					    		                              }
 			 		     			 					    		                                   generateDCTable(dataSet);
 			 		     			 					    		                                   $('#<%=namespace%>dcconfirm').dialog('close');
      			 					    		                                    				}else{
      			 					    		                                    					$('#<%=namespace%>dcconfirm').dialog('close');
 		 	    					    		                                    		        	$('#<%=namespace%>error').dialog({
 		 	    					                                 			        					title: '<liferay-ui:message key="error"/>',
 		 	    					                                 			        			        modal: true,
 		 	    					                                 			        			        width: screenWidth,
 		 	    					                                 			        			        height:'auto',
 		 	    					                                 			        			        resizable:false,
 		 	    					                                 			        			        position: { my: "center", at: "center", of: window },
 		 	    					                                 			        			        open: function(){
 		 	    					                                 			        			        	$('#<%=namespace%>errordetail').html('<p>'+obj.status.message+'<p>')
 		 	    					                                 			        			        	
 		 	    					                                 			        			        },
 		 	    					                                 			        			        buttons:[
 		 	    					                                 			        			                 {
 		 	    					                                 			        			                	id:'error',
 		 	    					                                 			        	         			        text: '<liferay-ui:message key="confirm"/>', 
 		 	    					                                 			        	         			        click: function() {
 		 	    					                                 			        	         			        	
 		 	    					                                 			        	         			        	$('#<%=namespace%>error').dialog('close');
 		 	    					                                 			        	         			        }
 		 	    					                                 			        			                 }
 		 	    					                                 			        			                 
 		 	    					                                 			        			                 ]
 		 	    					                                 			        				})
      			 					    		                                    				}
      			 		     			 		          			        			        	   
      			 					    		                                    				  
      			 					    		                                    			  }) 
      			 					    		                                    			  
      			 					    		                         
      			 		          			        			        	 }
      			 		          			        			         },
      			 		          			        			         {
      			 		          			        			        	 text:'<liferay-ui:message key="Cancel"/>',
      			 		          			        			        	 click:function(){
      			 		          			        			        		$('#<%=namespace%>dcconfirm').dialog('close');
      			 		          			        			        	 }
      			 		          			        			         }
      			 		          			        			         
      			 		          			        			         ]
      			 		          			        		
      			 		          			        			
      			 		          			        		})
      			 		   			    			     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
      			 		   	    		        	     $(".ui-dialog-title").css("color", "white");
      			 		   	    		        	     $(".ui-dialog").css("position", "center");
      			 		          			        	
      			 		          			        }
      			 		          			    },
     			 		          			  ]
     			 			    	 
     			 			    	 
     			 			     });
     			            	     $(".ui-dialog-titlebar").css("background-color", "#61cc61");
     			         	     $(".ui-dialog-title").css("color", "white");
     			         	     $(".ui-dialog").css("position", "center");
     			     			   
     			     			});
     			     
     			     };

     			 		   
     			 	    }

     			 		  }
     			 )
     		  }
     		);
};


 	


 </aui:script> 
